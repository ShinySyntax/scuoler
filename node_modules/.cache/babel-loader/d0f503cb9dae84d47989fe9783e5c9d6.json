{"ast":null,"code":"var _jsxFileName = \"/home/mathew/javascript/ischools-react/client/src/components/QuizInsert.js\";\nimport React from 'react';\nimport data from './data';\nimport { Redirect } from 'react-router-dom';\n\nclass QuizInsert extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spinner: false,\n      duration_minutes: 30,\n      description: '',\n      courseSearchKey: '',\n      selectedCourseId: '',\n      courseObjectsFiltered: [],\n      coursesAddedArray: [],\n      augmentedCourseObjects: [],\n      augmentedCourseObjectsPrior: [],\n      courseId: null,\n      courseName: 'UnAssigned',\n      icons: data.icons\n    };\n    this.baseState = {\n      description: ''\n    };\n    this.descriptionChange = this.descriptionChange.bind(this);\n    this.selectChange = this.selectChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.durationChange = this.durationChange.bind(this);\n    this.checkStaticCourse = this.checkStaticCourse.bind(this);\n    this.courseSearchBoxChange = this.courseSearchBoxChange.bind(this);\n    this.courseObjectsFilteredClick = this.courseObjectsFilteredClick.bind(this);\n  }\n\n  courseObjectsFilteredClick(str, courseId, e) {\n    this.setState({\n      courseSearchKey: str,\n      selectedCourseId: courseId,\n      courseObjectsFiltered: [],\n      augmentedCourseObjectsPrior: this.state.augmentedCourseObjects,\n      augmentedCourseObjects: []\n    });\n  }\n\n  courseSearchBoxChange(e) {\n    let strSearchKey = e.target.value;\n    var timer = setTimeout(() => {\n      this.checkStaticCourse(strSearchKey);\n    }, 1000);\n    const courseObjectsFiltered = e.target.value !== '' ? this.props.coursesArray.filter(val => val.name.toUpperCase().startsWith(strSearchKey.toUpperCase())) : []; //const courseObjectsFiltered=this.props.coursesArray.filter((val)=>val.description.toUpperCase().startsWith(e.target.value.toUpperCase()));\n\n    this.setState({\n      courseSearchKey: e.target.value,\n      courseObjectsFiltered: courseObjectsFiltered\n    });\n  }\n\n  async checkStaticCourse(currentValue) {\n    if (currentValue === this.state.courseSearchKey && currentValue !== '') {\n      //console.log('static value'+currentValue);\n      var reqBody = \"searchKey=\" + encodeURIComponent(this.state.courseSearchKey);\n      let searchResults = await fetch(`/api/searchCoursesForPrefix`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      });\n      let prefixSearchResults = await searchResults.json();\n      let augmentedCourseObjects = [];\n      prefixSearchResults.forEach(ele => {\n        let len = this.state.courseObjectsFiltered.filter(val => val.id === ele.id).length;\n        if (len <= 0) augmentedCourseObjects.push(ele);\n      }); //console.log(augmentedCourseObjects);\n\n      this.setState({\n        augmentedCourseObjects: augmentedCourseObjects\n      });\n    }\n  }\n\n  handleSubmit() {\n    if (this.state.description === '') {\n      alert('Description cannot be empty');\n      return;\n    } else if (this.state.duration_minutes === '') {\n      alert('Duration cannot be empty');\n      return;\n    } else if (isNaN(this.state.duration_minutes)) {\n      alert('Duration has to be a number');\n      return;\n    } else {\n      this.props.showSpinner();\n      var reqBody = \"quizDescription=\" + encodeURIComponent(this.state.description);\n      reqBody += \"&duration_minutes=\" + encodeURIComponent(this.state.duration_minutes);\n      reqBody += \"&courseId=\" + encodeURIComponent(this.state.courseId);\n      reqBody += '&authorName=' + encodeURIComponent(this.props.loggedInUser);\n      fetch(`/api/insertQuizAction`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      }).then(res => res.json()).then(data => {\n        //if(data.updatestatus==\"ok\")\n        let quizesArrayCopy = [...this.props.quizesArray];\n        let obj = {\n          id: data.quizId,\n          description: this.state.description,\n          duration_minutes: this.state.duration_minutes,\n          name: this.state.courseName,\n          author_id: this.props.loggedInUser\n        };\n        quizesArrayCopy.push(obj);\n        this.props.setQuizes(quizesArrayCopy);\n        this.setState(this.baseState);\n        this.props.hideSpinner();\n        alert('Quiz inserted');\n        window.location.assign(\"http://\" + window.location.hostname + ':' + window.location.port + \"/quizesBrowse\");\n      });\n    }\n  }\n\n  durationChange(e) {\n    this.setState({\n      duration_minutes: e.target.value\n    });\n  }\n\n  descriptionChange(e) {\n    //console.log(this.state.courseId+' '+this.state.courseName);\n    const new_description = e.target.value; //console.log(e.target.value);\n\n    this.setState({\n      description: new_description\n    });\n  }\n\n  componentDidMount() {\n    this.props.loadCourses();\n    /*if(this.state.courseId===undefined && this.props.coursesArray.length>0)\n        this.setState({courseId:this.props.coursesArray[0].id, courseName:this.props.coursesArray[0].name});*/\n  }\n\n  selectChange(e) {\n    //console.log(e.target.value);\n    var new_courseId = e.target.value;\n    var new_courseName = e.target.options[e.target.selectedIndex].text;\n    this.setState({\n      courseId: new_courseId,\n      courseName: new_courseName\n    });\n  }\n\n  render() {\n    if (this.props.loggedInUser === '') {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/errorLogin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 14\n        }\n      });\n    }\n\n    let courseObjectsFilteredAugmented = [...this.state.courseObjectsFiltered];\n    courseObjectsFilteredAugmented = courseObjectsFilteredAugmented.concat(this.state.augmentedCourseObjects);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quizInsert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"HomeLink\",\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"homeIcon\",\n      src: this.state.icons.home,\n      alt: \"back to home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }\n    }, \"Insert Quiz\"), /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, \"Duration (minutes):\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 28\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"durationMinutes\",\n      style: {\n        marginLeft: '23px'\n      },\n      onChange: this.durationChange,\n      value: this.state.duration_minutes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 53\n      }\n    }), \"Quiz Description:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 28\n      }\n    }), /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"quizDescription\",\n      name: \"quizDescription\",\n      type: \"text\",\n      rows: \"10\",\n      style: {\n        width: '90%'\n      },\n      onChange: this.descriptionChange,\n      value: this.state.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 16\n      }\n    }), \"Author:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"authorName\",\n      name: \"authorName\",\n      type: \"text\",\n      style: {\n        width: '100px',\n        textAlign: 'center'\n      },\n      required: \"true\",\n      value: this.props.loggedInUser,\n      readonly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }), \"Courses:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"AddToDialog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"autocomplete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"searchBox\",\n      type: \"text\",\n      name: \"searchBox\",\n      value: this.state.courseSearchKey,\n      onChange: this.courseSearchBoxChange,\n      placeholder: \"Type first letters of quiz \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"autocomplete-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 18\n      }\n    }, courseObjectsFilteredAugmented.map(obj => /*#__PURE__*/React.createElement(\"div\", {\n      onClick: e => this.courseObjectsFilteredClick(obj.name, obj.id, e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 136\n      }\n    }, obj.name.substring(0, this.state.courseSearchKey.length)), obj.name.substring(this.state.courseSearchKey.length), \"(\", obj.id, \")\")))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Add Course\",\n      onClick: e => this.AddToCourseSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, this.state.coursesAddedArray !== undefined ? this.state.coursesAddedArray.map(objQ => /*#__PURE__*/React.createElement(\"div\", {\n      id: objQ.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }, \"|\", objQ.name, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"closeBtn\",\n      onClick: e => this.props.removeCourseFromCoursesArray(e, objQ.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 20\n      }\n    }, \"\\xD7\"), \"\\xA0|\")) : null), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 16\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 1\n      }\n    }), \"         \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"Insert Quiz\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    })));\n  }\n\n}\n\nexport default QuizInsert;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/QuizInsert.js"],"names":["React","data","Redirect","QuizInsert","Component","constructor","props","state","spinner","duration_minutes","description","courseSearchKey","selectedCourseId","courseObjectsFiltered","coursesAddedArray","augmentedCourseObjects","augmentedCourseObjectsPrior","courseId","courseName","icons","baseState","descriptionChange","bind","selectChange","handleSubmit","durationChange","checkStaticCourse","courseSearchBoxChange","courseObjectsFilteredClick","str","e","setState","strSearchKey","target","value","timer","setTimeout","coursesArray","filter","val","name","toUpperCase","startsWith","currentValue","reqBody","encodeURIComponent","searchResults","fetch","headers","method","body","prefixSearchResults","json","forEach","ele","len","id","length","push","alert","isNaN","showSpinner","loggedInUser","then","res","quizesArrayCopy","quizesArray","obj","quizId","author_id","setQuizes","hideSpinner","window","location","assign","hostname","port","new_description","componentDidMount","loadCourses","new_courseId","new_courseName","options","selectedIndex","text","render","courseObjectsFilteredAugmented","concat","home","marginLeft","width","textAlign","map","substring","AddToCourseSubmit","undefined","objQ","removeCourseFromCoursesArray"],"mappings":"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","sourcesContent":["import React from 'react';\nimport data from './data';\nimport {  Redirect } from 'react-router-dom';\n\nclass QuizInsert extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state={\n      spinner:false,\n      duration_minutes:30,\n      description:'',\n      courseSearchKey: '',\n      selectedCourseId:'',\n      courseObjectsFiltered:[],\n      coursesAddedArray:[],\n      augmentedCourseObjects:[],\n      augmentedCourseObjectsPrior:[],\n\n      courseId:null,\n      courseName:'UnAssigned',\n      icons: data.icons\n    }\n    this.baseState={\n      description:''\n    }\n    this.descriptionChange=this.descriptionChange.bind(this);\n    this.selectChange=this.selectChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n    this.durationChange=this.durationChange.bind(this);\n\n    this.checkStaticCourse=this.checkStaticCourse.bind(this);\n    this.courseSearchBoxChange=this.courseSearchBoxChange.bind(this);\n    this.courseObjectsFilteredClick=this.courseObjectsFilteredClick.bind(this);\n  }\n\n  courseObjectsFilteredClick(str, courseId, e){\n    this.setState({courseSearchKey: str, selectedCourseId: courseId, courseObjectsFiltered: [],\n        augmentedCourseObjectsPrior: this.state.augmentedCourseObjects, augmentedCourseObjects:[]});\n  }\n\n  courseSearchBoxChange(e){\n    let strSearchKey=e.target.value;\n    var timer = setTimeout(() => {this.checkStaticCourse(strSearchKey);}, 1000);\n    const courseObjectsFiltered=e.target.value!==''?this.props.coursesArray.filter((val)=>val.name.toUpperCase().startsWith(strSearchKey.toUpperCase())):[];\n    //const courseObjectsFiltered=this.props.coursesArray.filter((val)=>val.description.toUpperCase().startsWith(e.target.value.toUpperCase()));\n    this.setState({courseSearchKey: e.target.value, courseObjectsFiltered: courseObjectsFiltered});\n  }\n\n  async checkStaticCourse(currentValue){\n    if(currentValue===this.state.courseSearchKey && currentValue!==''){\n      //console.log('static value'+currentValue);\n      var reqBody=\"searchKey=\"+encodeURIComponent(this.state.courseSearchKey);\n      let searchResults=await fetch(`/api/searchCoursesForPrefix`, {\n              headers:{\n                'Accept':'application/json',\n                'Content-type': 'application/x-www-form-urlencoded'\n              },\n              method: 'POST',\n              body: reqBody\n            });\n      let prefixSearchResults=await searchResults.json();\n\n      let augmentedCourseObjects=[];\n      prefixSearchResults.forEach(ele=>{\n        let len=this.state.courseObjectsFiltered.filter(val=>val.id===ele.id).length;\n        if(len<=0)\n          augmentedCourseObjects.push(ele);\n      })\n      //console.log(augmentedCourseObjects);\n      this.setState({augmentedCourseObjects:augmentedCourseObjects});\n    }\n  }\n\n  handleSubmit(){\n    if(this.state.description===''){\n      alert('Description cannot be empty');\n      return;\n    }\n    else if(this.state.duration_minutes===''){\n      alert('Duration cannot be empty');\n      return;\n    }\n    else if(isNaN(this.state.duration_minutes)){\n      alert('Duration has to be a number');\n      return;\n    }\n    else{\n      this.props.showSpinner();\n      var reqBody=\"quizDescription=\"+encodeURIComponent(this.state.description);\n          reqBody+=\"&duration_minutes=\"+encodeURIComponent(this.state.duration_minutes);\n      reqBody+=\"&courseId=\"+encodeURIComponent(this.state.courseId);\n      reqBody+='&authorName='+encodeURIComponent(this.props.loggedInUser);\n\n      fetch(`/api/insertQuizAction`, {\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data=>{\n          //if(data.updatestatus==\"ok\")\n              let quizesArrayCopy=[...this.props.quizesArray];\n              let obj={\n                id: data.quizId,\n                description: this.state.description,\n                duration_minutes: this.state.duration_minutes,\n                name:this.state.courseName,\n                author_id:this.props.loggedInUser\n              };\n              quizesArrayCopy.push(obj);\n              this.props.setQuizes(quizesArrayCopy);\n              this.setState(this.baseState);\n              this.props.hideSpinner();\n              alert('Quiz inserted');\n              window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/quizesBrowse\");\n      })\n\n    }\n\n  }\n\n  durationChange(e){\n    this.setState({duration_minutes:e.target.value})\n  }\n\n  descriptionChange(e){\n    //console.log(this.state.courseId+' '+this.state.courseName);\n    const new_description=e.target.value;\n    //console.log(e.target.value);\n    this.setState({description:new_description});\n  }\n\n  componentDidMount(){\n    this.props.loadCourses();\n    /*if(this.state.courseId===undefined && this.props.coursesArray.length>0)\n        this.setState({courseId:this.props.coursesArray[0].id, courseName:this.props.coursesArray[0].name});*/\n  }\n\n  selectChange(e){\n    //console.log(e.target.value);\n    var new_courseId=e.target.value;\n    var new_courseName=e.target.options[e.target.selectedIndex].text;\n    this.setState({courseId:new_courseId, courseName:new_courseName});\n  }\n\n  render(){\n    if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n\n    let courseObjectsFilteredAugmented=[...this.state.courseObjectsFiltered];\n    courseObjectsFilteredAugmented=courseObjectsFilteredAugmented.concat(this.state.augmentedCourseObjects);\n\n    return (\n      <div className=\"quizInsert\">\n      <a class=\"HomeLink\" href=\"/\">\n          <img class=\"homeIcon\" src={this.state.icons.home} alt=\"back to home\"/>\n      {/*back to home*/}\n      </a>\n      <div class=\"h1\">\n        Insert Quiz\n      </div>\n        <fieldset>\n        Duration (minutes):<br/>\n        <input type=\"text\" id=\"durationMinutes\" style={{marginLeft:'23px'}}\n        onChange={this.durationChange}\n        value={this.state.duration_minutes}></input><br/>\n          Quiz Description:<br/>\n          <textarea id=\"quizDescription\" name=\"quizDescription\" type=\"text\" rows=\"10\"\n          style={{width:'90%'}}\n          onChange={this.descriptionChange}\n          value={this.state.description}\n           >\n          </textarea>\n          <br/><br/>\n          Author:<br/>\n          <input id=\"authorName\" name=\"authorName\" type=\"text\" style={{width:'100px', textAlign: 'center'}}\n          required=\"true\" value={this.props.loggedInUser} readonly>\n          </input>\n          <br/>\n          <br/>\n          Courses:<br/>\n          {/*<select id=\"courseId\" onChange={this.selectChange}  name=\"courseId\" required=\"true\">\n              <option value=\"null\">UnAssigned</option>\n          {\n              this.props.coursesArray.map(obj=>(\n                <option value={obj.id}>{obj.name}</option>\n                )\n              )\n          }\n          </select>*/}\n          <div id=\"AddToDialog\">\n              <div className=\"autocomplete\">\n                 <input id=\"searchBox\" type=\"text\" name=\"searchBox\"\n                   value={this.state.courseSearchKey}\n                   onChange={this.courseSearchBoxChange}\n                  placeholder=\"Type first letters of quiz \"/>\n                 <div className=\"autocomplete-items\">\n                   {\n                     courseObjectsFilteredAugmented.map(obj=>(<div onClick={(e)=>this.courseObjectsFilteredClick(obj.name, obj.id, e)}><strong>{obj.name.substring(0,this.state.courseSearchKey.length)}</strong>{obj.name.substring(this.state.courseSearchKey.length)}({obj.id})</div>))\n                   }\n                 </div>\n              </div>\n              <input type=\"submit\" value=\"Add Course\" onClick={(e)=>this.AddToCourseSubmit(e)}/>\n          </div>\n          <br/>\n          <div>\n          {\n              this.state.coursesAddedArray!==undefined?\n              ( this.state.coursesAddedArray.map(objQ=>(\n                  <div   id={objQ.id} >|{objQ.name}\n                   <span className=\"closeBtn\"\n                     onClick={(e)=>this.props.removeCourseFromCoursesArray(e, objQ.id)}>&times;</span>&nbsp;|\n                  </div>\n                  )\n                )\n              ):null\n          }\n          </div>\n          <br/><br/>\n<br/>         <input type=\"button\" value=\"Insert Quiz\" onClick={this.handleSubmit}/>\n        </fieldset>\n      </div>\n    )\n  }\n\n}\n\nexport default QuizInsert;\n"]},"metadata":{},"sourceType":"module"}