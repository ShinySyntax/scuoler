{"ast":null,"code":"import _classCallCheck from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import QuizEditDialog from'./QuizEditDialog';import{Redirect}from'react-router-dom';var QuizShowSelected=/*#__PURE__*/function(_React$Component){_inherits(QuizShowSelected,_React$Component);var _super=_createSuper(QuizShowSelected);function QuizShowSelected(props){var _this;_classCallCheck(this,QuizShowSelected);_this=_super.call(this,props);_this.state={quizObj:{},problemsArray:[],showEditQuizDialog:false,quizObjForEdit:{}};_this.editQuizHandler=_this.editQuizHandler.bind(_assertThisInitialized(_this));_this.handleEditQuizDialogDismiss=_this.handleEditQuizDialogDismiss.bind(_assertThisInitialized(_this));_this.saveUpdateHandler=_this.saveUpdateHandler.bind(_assertThisInitialized(_this));_this.descriptionChange=_this.descriptionChange.bind(_assertThisInitialized(_this));_this.courseNameChange=_this.courseNameChange.bind(_assertThisInitialized(_this));_this.selectChange=_this.selectChange.bind(_assertThisInitialized(_this));_this.durationChange=_this.durationChange.bind(_assertThisInitialized(_this));return _this;}_createClass(QuizShowSelected,[{key:\"handleEditQuizDialogDismiss\",value:function handleEditQuizDialogDismiss(e){this.setState({showEditQuizDialog:false,quizObjForEdit:this.state.quizObj});}},{key:\"saveUpdateHandler\",value:function saveUpdateHandler(e){var _this2=this;this.props.showSpinner();//console.log(newCourseObj);\nvar reqBody=\"id=\"+encodeURIComponent(this.state.quizObjForEdit.id);reqBody+='&course_id='+encodeURIComponent(this.state.quizObjForEdit.course_id);reqBody+='&description='+encodeURIComponent(this.state.quizObjForEdit.description);reqBody+='&duration_minutes='+encodeURIComponent(this.state.quizObjForEdit.duration_minutes);fetch(\"/api/updateQuiz\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){//console.log(data);\nif(data.updatestatus===\"ok\"){_this2.props.loadQuizes();var quizesArrayCopy=JSON.parse(JSON.stringify(_this2.props.quizesArray));quizesArrayCopy.forEach(function(obj){if(obj.id===_this2.state.quizObjForEdit.id){obj.courseName=_this2.state.quizObjForEdit.courseName;obj.course_id=_this2.state.quizObjForEdit.course_id;obj.description=_this2.state.quizObjForEdit.description;obj.duration_minutes=_this2.state.quizObjForEdit.duration_minutes;}});_this2.props.setQuizes(quizesArrayCopy);_this2.setState({quizObj:_this2.state.quizObjForEdit,showEditQuizDialog:false});_this2.props.hideSpinner();alert('Quiz updated');}else{alert('Quiz updation failed!');}});}},{key:\"descriptionChange\",value:function descriptionChange(e){var copied=Object.assign({},this.state.quizObjForEdit);copied.description=e.target.value;this.setState({quizObjForEdit:copied});}},{key:\"courseNameChange\",value:function courseNameChange(e){var copied=Object.assign({},this.state.quizObjForEdit);copied.courseName=e.target.value;this.setState({quizObjForEdit:copied});}},{key:\"durationChange\",value:function durationChange(e){var copied=Object.assign({},this.state.quizObjForEdit);copied.duration_minutes=e.target.value;this.setState({quizObjForEdit:copied});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;this.props.showSpinner();var params=this.props.match.params;var reqBody=\"quizId=\"+encodeURIComponent(params.id);fetch(\"/api/getTheQuiz\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){data.id=params.id;//console.log(data);\nfetch(\"/api/getProblemListForQuiz\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data1){//console.log(data1);\n_this3.setState({quizObj:data,quizObjForEdit:data,problemsArray:data1});_this3.props.hideSpinner();});});}},{key:\"editQuizHandler\",value:function editQuizHandler(){this.setState({showEditQuizDialog:true});}},{key:\"selectChange\",value:function selectChange(e){var copied=Object.assign({},this.state.quizObjForEdit);var new_course_id=e.target.value;var new_course_name=e.target.options[e.target.selectedIndex].text;copied.course_id=new_course_id;copied.courseName=new_course_name;//console.log(copied);\nthis.setState({quizObjForEdit:copied});}},{key:\"deleteQuizHandler\",value:function deleteQuizHandler(id){var _this4=this;var b=window.confirm('Are you sure you want to delete');if(b===true){this.props.showSpinner();var reqBody=\"id=\"+encodeURIComponent(id);fetch(\"/api/deleteQuiz\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){if(data.deletestatus===\"ok\"){var quizesArrayCopy=_this4.props.quizesArray.filter(function(obj){return obj.id!==id;});_this4.props.setQuizes(quizesArrayCopy);_this4.props.hideSpinner();alert('Quiz deleted');window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/quizesBrowse\");}});}//end of if\n}},{key:\"render\",value:function render(){var _this5=this;if(this.props.loggedInUser===''){return/*#__PURE__*/React.createElement(Redirect,{to:\"/errorLogin\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"Panel\"},/*#__PURE__*/React.createElement(\"a\",{className:\"HomeLink\",href:\"/\"},\"back to home\"),/*#__PURE__*/React.createElement(\"div\",{className:\"h1\"},this.state.quizObj.description),/*#__PURE__*/React.createElement(\"b\",null,\"Course:\"),\" \",this.state.quizObj.courseName,this.props.loggedInUser===this.state.quizObj.instructorId||this.props.admin===\"1\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Duration (minutes):\"),\" \",this.state.quizObj.duration_minutes,/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"EditButton\",onClick:function onClick(){return _this5.editQuizHandler();},id:\"e\".concat(this.state.quizObj.id),value:\"Edit Quiz\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"EditButton\",onClick:function onClick(){return _this5.deleteQuizHandler(_this5.state.quizObj.id);},id:\"d\".concat(this.state.quizObj.id),value:\"Delete Quiz\"})):null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"LeftButton\",onClick:function onClick(){return _this5.props.startQuiz(_this5.state.quizObj);},id:\"s\".concat(this.state.quizObj.id),value:\"Start Quiz\"}),/*#__PURE__*/React.createElement(\"p\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\" Instructor:\"),\" \",this.state.quizObj.instructorId,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),this.props.isQuizStarted(this.state.quizObj.id)?/*#__PURE__*/React.createElement(\"form\",null,this.state.problemsArray.map(function(obj){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"b\",null,\"Question: \"),/*#__PURE__*/React.createElement(\"div\",{className:\"Question\",dangerouslySetInnerHTML:{__html:obj.description}}),/*#__PURE__*/React.createElement(\"b\",null,\"Options\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"\".concat(obj.id,\"$option1\"),onChange:function onChange(e){return _this5.props.optionChange(obj.id,e.target.value);},checked:_this5.props.startedQuizAnswers!=null&&_this5.props.startedQuizAnswers[obj.id]===\"1\",name:\"\".concat(obj.id,\"$\"),value:\"1\"}),/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:obj.option1}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"\".concat(obj.id,\"$option2\"),onChange:function onChange(e){return _this5.props.optionChange(obj.id,e.target.value);},checked:_this5.props.startedQuizAnswers!=null&&_this5.props.startedQuizAnswers[obj.id]===\"2\",name:\"\".concat(obj.id,\"$\"),value:\"2\"}),/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:obj.option2}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"\".concat(obj.id,\"$option3\"),onChange:function onChange(e){return _this5.props.optionChange(obj.id,e.target.value);},checked:_this5.props.startedQuizAnswers!=null&&_this5.props.startedQuizAnswers[obj.id]===\"3\",name:\"\".concat(obj.id,\"$\"),value:\"3\"}),/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:obj.option3}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"\".concat(obj.id,\"$option4\"),onChange:function onChange(e){return _this5.props.optionChange(obj.id,e.target.value);},checked:_this5.props.startedQuizAnswers!=null&&_this5.props.startedQuizAnswers[obj.id]===\"4\",name:\"\".concat(obj.id,\"$\"),value:\"4\"}),/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:obj.option4}}),/*#__PURE__*/React.createElement(\"br\",null));}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"LeftButton\",onClick:function onClick(e){if(window.confirm('Are you sure you want to submit the quiz:'+_this5.state.quizObj.description)===true)_this5.props.submitQuiz();},value:\"Submit Quiz\"})):null,/*#__PURE__*/React.createElement(QuizEditDialog,{objectForEdit:this.state.quizObjForEdit,show:this.state.showEditQuizDialog,handleDismiss:this.handleEditQuizDialogDismiss,handleSubmit:this.saveUpdateHandler,descriptionChange:this.descriptionChange,courseNameChange:this.courseNameChange,loadCourses:this.props.loadCourses,coursesArray:this.props.coursesArray,selectChange:this.selectChange,durationChange:this.durationChange}));}}]);return QuizShowSelected;}(React.Component);export default QuizShowSelected;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/QuizShowSelected.js"],"names":["React","QuizEditDialog","Redirect","QuizShowSelected","props","state","quizObj","problemsArray","showEditQuizDialog","quizObjForEdit","editQuizHandler","bind","handleEditQuizDialogDismiss","saveUpdateHandler","descriptionChange","courseNameChange","selectChange","durationChange","e","setState","showSpinner","reqBody","encodeURIComponent","id","course_id","description","duration_minutes","fetch","headers","method","body","then","res","json","data","updatestatus","loadQuizes","quizesArrayCopy","JSON","parse","stringify","quizesArray","forEach","obj","courseName","setQuizes","hideSpinner","alert","copied","Object","assign","target","value","params","match","data1","new_course_id","new_course_name","options","selectedIndex","text","b","window","confirm","deletestatus","filter","location","hostname","port","loggedInUser","instructorId","admin","deleteQuizHandler","startQuiz","isQuizStarted","map","__html","optionChange","startedQuizAnswers","option1","option2","option3","option4","submitQuiz","loadCourses","coursesArray","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport QuizEditDialog from './QuizEditDialog';\nimport {  Redirect } from 'react-router-dom';\n\nclass QuizShowSelected extends React.Component{\n  constructor(props){\n    super(props);\n    this.state={\n      quizObj:{},\n      problemsArray:[],\n      showEditQuizDialog:false,\n      quizObjForEdit:{}\n    }\n    this.editQuizHandler=this.editQuizHandler.bind(this);\n    this.handleEditQuizDialogDismiss=this.handleEditQuizDialogDismiss.bind(this);\n    this.saveUpdateHandler=this.saveUpdateHandler.bind(this);\n    this.descriptionChange=this.descriptionChange.bind(this);\n    this.courseNameChange=this.courseNameChange.bind(this);\n    this.selectChange=this.selectChange.bind(this);\n    this.durationChange=this.durationChange.bind(this);\n  }\n\n  handleEditQuizDialogDismiss(e){\n     this.setState({showEditQuizDialog:false, quizObjForEdit: this.state.quizObj,\n     });\n  }\n\n  saveUpdateHandler(e){\n    this.props.showSpinner();\n    //console.log(newCourseObj);\n    var reqBody=\"id=\"+encodeURIComponent(this.state.quizObjForEdit.id);\n    reqBody+='&course_id='+encodeURIComponent(this.state.quizObjForEdit.course_id);\n    reqBody+='&description='+encodeURIComponent(this.state.quizObjForEdit.description);\n    reqBody+='&duration_minutes='+encodeURIComponent(this.state.quizObjForEdit.duration_minutes);\n\n    fetch(`/api/updateQuiz`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n                //console.log(data);\n\n        if(data.updatestatus===\"ok\"){\n            this.props.loadQuizes();\n            let quizesArrayCopy=JSON.parse(JSON.stringify(this.props.quizesArray));\n            quizesArrayCopy.forEach((obj)=>{\n              if(obj.id===this.state.quizObjForEdit.id){\n                 obj.courseName=this.state.quizObjForEdit.courseName;\n                 obj.course_id=this.state.quizObjForEdit.course_id;\n                 obj.description=this.state.quizObjForEdit.description;\n                 obj.duration_minutes=this.state.quizObjForEdit.duration_minutes;\n              }\n            });\n            this.props.setQuizes(quizesArrayCopy);\n            this.setState({quizObj: this.state.quizObjForEdit, showEditQuizDialog:false});\n            this.props.hideSpinner();\n            alert('Quiz updated');\n        }\n        else{\n          alert('Quiz updation failed!');\n        }\n    })\n  }\n\n  descriptionChange(e){\n    const copied = Object.assign({}, this.state.quizObjForEdit)\n    copied.description=e.target.value;\n    this.setState({quizObjForEdit:copied});\n  }\n\n  courseNameChange(e){\n    const copied = Object.assign({}, this.state.quizObjForEdit)\n    copied.courseName=e.target.value;\n    this.setState({quizObjForEdit:copied});\n  }\n\n  durationChange(e){\n    const copied = Object.assign({}, this.state.quizObjForEdit)\n    copied.duration_minutes=e.target.value;\n    this.setState({quizObjForEdit:copied});\n  }\n\n  componentDidMount(){\n    this.props.showSpinner();\n    const {params}= this.props.match;\n\n    var reqBody=\"quizId=\"+encodeURIComponent(params.id);\n    fetch(`/api/getTheQuiz`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      data.id=params.id;\n      //console.log(data);\n      fetch(`/api/getProblemListForQuiz`, {\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data1=>{\n            //console.log(data1);\n            this.setState({quizObj: data, quizObjForEdit: data, problemsArray: data1});\n            this.props.hideSpinner();\n       })\n    })\n  }\n\n  editQuizHandler(){\n    this.setState({showEditQuizDialog:true});\n  }\n\n  selectChange(e){\n    const copied = Object.assign({}, this.state.quizObjForEdit)\n    var new_course_id=e.target.value;\n    var new_course_name=e.target.options[e.target.selectedIndex].text;\n    copied.course_id=new_course_id;\n    copied.courseName=new_course_name;\n    //console.log(copied);\n    this.setState({quizObjForEdit:copied});\n  }\n\n\n  deleteQuizHandler(id){\n    let b=window.confirm('Are you sure you want to delete');\n    if(b===true){\n        this.props.showSpinner();\n          var reqBody=\"id=\"+encodeURIComponent(id);\n          fetch(`/api/deleteQuiz`, {\n            headers:{\n              'Accept':'application/json',\n              'Content-type': 'application/x-www-form-urlencoded'\n            },\n            method: 'POST',\n            body: reqBody\n          })\n          .then(res=>res.json())\n          .then(data=>{\n              if(data.deletestatus===\"ok\"){\n                  let quizesArrayCopy=this.props.quizesArray.filter((obj)=>obj.id!==id);\n                  this.props.setQuizes(quizesArrayCopy);\n                  this.props.hideSpinner();\n                  alert('Quiz deleted');\n                  window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/quizesBrowse\");\n              }\n          })\n    }//end of if\n  }\n\n\n  render(){\n    if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n    return (\n      <div className=\"Panel\">\n          {/*\n            this.state.spinner===true?(<div id=\"spinner\" className=\"container\"><div className=\"loading\"></div></div>):null\n          */}\n          <a className=\"HomeLink\" href=\"/\">back to home</a>\n          <div className=\"h1\">\n            {this.state.quizObj.description}\n          </div>\n           <b>Course:</b> {this.state.quizObj.courseName}\n           {(this.props.loggedInUser===this.state.quizObj.instructorId||this.props.admin===\"1\")?\n           (<div><br/>\n            <span><b>Duration (minutes):</b> {this.state.quizObj.duration_minutes}\n              <input type=\"button\"\n               className=\"EditButton\"\n               onClick={()=>this.editQuizHandler()}\n               id={`e${this.state.quizObj.id}`} value=\"Edit Quiz\"/>\n            </span><br/><br/>\n            <input type=\"button\" className=\"EditButton\"\n             onClick={()=>this.deleteQuizHandler(this.state.quizObj.id)}\n             id={`d${this.state.quizObj.id}`} value=\"Delete Quiz\"/>\n           </div>):null}\n           <br/>\n           <input type=\"button\" className=\"LeftButton\"\n            onClick={()=>this.props.startQuiz(this.state.quizObj)}\n            id={`s${this.state.quizObj.id}`} value=\"Start Quiz\"/>\n           <p></p>\n           <br/>\n          <b> Instructor:</b> {this.state.quizObj.instructorId}\n          <br/><br/>\n          {this.props.isQuizStarted(this.state.quizObj.id)?(\n            <form>\n            {(this.state.problemsArray.map(obj=>(\n              <div>\n                  <hr/>\n                  <b>Question: </b>\n                  <div className=\"Question\"\n                        dangerouslySetInnerHTML={{\n                       __html: obj.description\n                       }}\n                  ></div><b>Options</b><br/>\n                  <input type=\"radio\" id={`${obj.id}$option1`} onChange={(e)=>this.props.optionChange(obj.id,e.target.value)}\n                  checked={this.props.startedQuizAnswers!=null&&this.props.startedQuizAnswers[obj.id]===\"1\"}\n                   name={`${obj.id}$`} value=\"1\" ></input>\n                  <span  dangerouslySetInnerHTML={{__html: obj.option1}}/><br/>\n                  <input type=\"radio\" id={`${obj.id}$option2`} onChange={(e)=>this.props.optionChange(obj.id,e.target.value)}\n                  checked={this.props.startedQuizAnswers!=null&&this.props.startedQuizAnswers[obj.id]===\"2\"}\n                   name={`${obj.id}$`} value=\"2\"></input>\n                  <span  dangerouslySetInnerHTML={{__html: obj.option2}}/><br/>\n                  <input type=\"radio\" id={`${obj.id}$option3`} onChange={(e)=>this.props.optionChange(obj.id,e.target.value)}\n                    checked={this.props.startedQuizAnswers!=null&&this.props.startedQuizAnswers[obj.id]===\"3\"}\n                   name={`${obj.id}$`} value=\"3\"></input>\n                  <span  dangerouslySetInnerHTML={{__html: obj.option3}}/><br/>\n                  <input type=\"radio\" id={`${obj.id}$option4`} onChange={(e)=>this.props.optionChange(obj.id,e.target.value)}\n                    checked={this.props.startedQuizAnswers!=null&&this.props.startedQuizAnswers[obj.id]===\"4\"}\n                   name={`${obj.id}$`} value=\"4\"></input>\n                  <span  dangerouslySetInnerHTML={{__html: obj.option4}}/><br/>\n              </div>\n            )\n          ))}\n           <br/>\n           <input type=\"button\" className=\"LeftButton\"\n           onClick={e=>{\n                         if(window.confirm('Are you sure you want to submit the quiz:'+this.state.quizObj.description)===true)\n                           this.props.submitQuiz();\n                       }\n                   }\n           value=\"Submit Quiz\"/>\n          </form>\n        ):null}\n        <QuizEditDialog\n                objectForEdit={this.state.quizObjForEdit}\n                show={this.state.showEditQuizDialog}\n                handleDismiss={this.handleEditQuizDialogDismiss}\n                handleSubmit={this.saveUpdateHandler}\n                descriptionChange={this.descriptionChange}\n                courseNameChange={this.courseNameChange}\n                loadCourses={this.props.loadCourses}\n                coursesArray={this.props.coursesArray}\n                selectChange={this.selectChange}\n                durationChange={this.durationChange}\n        />\n     </div>\n    )\n  }\n\n\n}\n\nexport default QuizShowSelected;\n"]},"metadata":{},"sourceType":"module"}