{"ast":null,"code":"import _toConsumableArray from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect}from'react-router-dom';var ProblemInsert=/*#__PURE__*/function(_React$Component){_inherits(ProblemInsert,_React$Component);var _super=_createSuper(ProblemInsert);function ProblemInsert(props){var _this;_classCallCheck(this,ProblemInsert);_this=_super.call(this,props);_this.state={quizesArray:[],quiz_id:'',quiz_description:\"\",description:\"\",solution:\"\",option1:\"\",option2:\"\",option3:\"\",option4:\"\",answerkey:\"\"};//this.baseState=this.state;\n_this.selectChange=_this.selectChange.bind(_assertThisInitialized(_this));_this.descriptionChange=_this.descriptionChange.bind(_assertThisInitialized(_this));_this.solutionChange=_this.solutionChange.bind(_assertThisInitialized(_this));_this.option1Change=_this.option1Change.bind(_assertThisInitialized(_this));_this.option2Change=_this.option2Change.bind(_assertThisInitialized(_this));_this.option3Change=_this.option3Change.bind(_assertThisInitialized(_this));_this.option4Change=_this.option4Change.bind(_assertThisInitialized(_this));_this.answerkeyChange=_this.answerkeyChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(ProblemInsert,[{key:\"selectChange\",value:function selectChange(e){//console.log(e.target.options[e.target.selectedIndex].text);\nvar new_quiz_id=e.target.value;var new_quiz_description=e.target.options[e.target.selectedIndex].text;this.setState({quiz_id:new_quiz_id,quiz_description:new_quiz_description});}},{key:\"descriptionChange\",value:function descriptionChange(e){if(this.props.quizesArray.length>0)this.setState({quiz_id:this.props.quizesArray[0].id,quiz_description:this.props.quizesArray[0].description});var new_description=e.target.value;//console.log(e.target.value);\nthis.setState({description:new_description});}},{key:\"solutionChange\",value:function solutionChange(e){var new_solution=e.target.value;//console.log(e.target.value);\nthis.setState({solution:new_solution});}},{key:\"answerkeyChange\",value:function answerkeyChange(e){var new_answerkey=e.target.value;//console.log(e.target.value);\nthis.setState({answerkey:new_answerkey});}},{key:\"option1Change\",value:function option1Change(e){var new_option1=e.target.value;//console.log(e.target.value);\nthis.setState({option1:new_option1});}},{key:\"option2Change\",value:function option2Change(e){var new_option2=e.target.value;//console.log(e.target.value);\nthis.setState({option2:new_option2});}},{key:\"option3Change\",value:function option3Change(e){var new_option3=e.target.value;//console.log(e.target.value);\nthis.setState({option3:new_option3});}},{key:\"option4Change\",value:function option4Change(e){var new_option4=e.target.value;//console.log(e.target.value);\nthis.setState({option4:new_option4});}},{key:\"handleSubmit\",value:function handleSubmit(e){var _this2=this;this.props.showSpinner();var reqBody='probDescription='+encodeURIComponent(this.state.description);reqBody+='&option1='+encodeURIComponent(this.state.option1);reqBody+='&option2='+encodeURIComponent(this.state.option2);reqBody+='&option3='+encodeURIComponent(this.state.option3);reqBody+='&option4='+encodeURIComponent(this.state.option4);reqBody+='&answerKey='+encodeURIComponent(this.state.answerkey);reqBody+='&quizId='+encodeURIComponent(this.state.quiz_id);var solution=this.state.solution.replace(/%20/g,'+');reqBody+='&ansDescription='+encodeURIComponent(solution);reqBody+='&authorName='+encodeURIComponent(this.props.loggedInUser);fetch(\"/api/insertProblemAction\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){var problemsArrayCopy=_toConsumableArray(_this2.props.problemsArray);var obj={id:data.problemId,quiz_id:_this2.state.quiz_id,quiz_description:_this2.state.quiz_description,description:_this2.state.description,solution:_this2.state.solution,option1:_this2.state.option1,option2:_this2.state.option2,option3:_this2.state.option3,option4:_this2.state.option4,answerKey:_this2.state.answerkey,author_id:_this2.props.loggedInUser};problemsArrayCopy.push(obj);_this2.props.setProblems(problemsArrayCopy);_this2.setState({description:\"\",solution:\"\",option1:\"\",option2:\"\",option3:\"\",option4:\"\",answerkey:\"\"});_this2.props.hideSpinner();//if(data.updatestatus==\"ok\")\nalert('problem inserted');window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/problemsBrowse\");});}},{key:\"render\",value:function render(){if(this.props.loggedInUser===''){return/*#__PURE__*/React.createElement(Redirect,{to:\"/errorLogin\"});}return/*#__PURE__*/React.createElement(\"div\",{class:\"InsertWindow\"},/*#__PURE__*/React.createElement(\"a\",{class:\"HomeLink\",href:\"/\"},\"back to home\"),/*#__PURE__*/React.createElement(\"div\",{class:\"h1\"},\"Insert Problem\"),/*#__PURE__*/React.createElement(\"fieldset\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{id:\"flexColLeft\"},\"Quiz Id:\",/*#__PURE__*/React.createElement(\"select\",{id:\"quizId\",onChange:this.selectChange,name:\"quizId\"},this.props.quizesArray.map(function(objQ,index){return/*#__PURE__*/React.createElement(\"option\",{value:objQ.id},objQ.description);})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Problem Description:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{id:\"probDescription\",name:\"probDescription\",rows:\"10\",type:\"text\",style:{width:'90%'},value:this.state.description,onChange:this.descriptionChange}),/*#__PURE__*/React.createElement(\"br\",null),\"Answer Description:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{id:\"ansDescription\",name:\"ansDescription\",rows:\"10\",type:\"text\",style:{width:'90%'},value:this.state.solution,onChange:this.solutionChange})),/*#__PURE__*/React.createElement(\"div\",{id:\"flexColRight\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Option1: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{width:'100px'},onChange:this.option1Change,id:\"option1\",value:this.state.option1}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Option2: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{width:'100px'},onChange:this.option2Change,id:\"option2\",value:this.state.option2}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Option3: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{width:'100px'},onChange:this.option3Change,id:\"option3\",value:this.state.option3}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Option4: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{width:'100px'},onChange:this.option4Change,id:\"option4\",value:this.state.option4}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Answer Key: \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"answerKey\",onChange:this.answerkeyChange,style:{width:'100px'},value:this.state.answerkey}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Author:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"authorName\",name:\"authorName\",type:\"text\",style:{width:'100px'},value:this.props.loggedInUser,readonly:true}),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"Insert Problem\",onClick:this.handleSubmit}))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'block',paddingTop:'30px',width:'100%'}}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'block',paddingTop:'10px',width:'100%'}})));}},{key:\"componentDidMount\",value:function componentDidMount(){this.props.loadQuizes();/*this.setState({\n      spinner:true\n    });\n    fetch(`/api/getQuizes`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      //console.log(data1);\n      this.setState({spinner:false, quizesArray: data});\n    });*/}}]);return ProblemInsert;}(React.Component);export default ProblemInsert;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/ProblemInsert.js"],"names":["React","Redirect","ProblemInsert","props","state","quizesArray","quiz_id","quiz_description","description","solution","option1","option2","option3","option4","answerkey","selectChange","bind","descriptionChange","solutionChange","option1Change","option2Change","option3Change","option4Change","answerkeyChange","handleSubmit","e","new_quiz_id","target","value","new_quiz_description","options","selectedIndex","text","setState","length","id","new_description","new_solution","new_answerkey","new_option1","new_option2","new_option3","new_option4","showSpinner","reqBody","encodeURIComponent","replace","loggedInUser","fetch","headers","method","body","then","res","json","data","problemsArrayCopy","problemsArray","obj","problemId","answerKey","author_id","push","setProblems","hideSpinner","alert","window","location","assign","hostname","port","map","objQ","index","width","display","paddingTop","loadQuizes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {  Redirect } from 'react-router-dom';\n\nclass ProblemInsert extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state={\n      quizesArray:[],\n      quiz_id:'',\n      quiz_description:\"\",\n      description:\"\",\n      solution:\"\",\n      option1:\"\",\n      option2:\"\",\n      option3:\"\",\n      option4:\"\",\n      answerkey:\"\"\n    }\n    //this.baseState=this.state;\n    this.selectChange=this.selectChange.bind(this);\n    this.descriptionChange=this.descriptionChange.bind(this);\n    this.solutionChange=this.solutionChange.bind(this);\n    this.option1Change=this.option1Change.bind(this);\n    this.option2Change=this.option2Change.bind(this);\n    this.option3Change=this.option3Change.bind(this);\n    this.option4Change=this.option4Change.bind(this);\n    this.answerkeyChange=this.answerkeyChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n  }\n\n  selectChange(e){\n    //console.log(e.target.options[e.target.selectedIndex].text);\n    var new_quiz_id=e.target.value;\n    var new_quiz_description=e.target.options[e.target.selectedIndex].text;\n    this.setState({quiz_id:new_quiz_id, quiz_description:new_quiz_description});\n  }\n\n  descriptionChange(e){\n    if(this.props.quizesArray.length>0)\n        this.setState({quiz_id:this.props.quizesArray[0].id, quiz_description:this.props.quizesArray[0].description});\n\n    const new_description=e.target.value;\n    //console.log(e.target.value);\n    this.setState({description:new_description});\n  }\n\n  solutionChange(e){\n    const new_solution=e.target.value;\n    //console.log(e.target.value);\n    this.setState({solution:new_solution});\n  }\n\n  answerkeyChange(e){\n    const new_answerkey=e.target.value;\n    //console.log(e.target.value);\n    this.setState({answerkey:new_answerkey});\n  }\n\n  option1Change(e){\n    const new_option1=e.target.value;\n    //console.log(e.target.value);\n    this.setState({option1:new_option1});\n  }\n\n  option2Change(e){\n    const new_option2=e.target.value;\n    //console.log(e.target.value);\n    this.setState({option2:new_option2});\n  }\n\n  option3Change(e){\n    const new_option3=e.target.value;\n    //console.log(e.target.value);\n    this.setState({option3:new_option3});\n  }\n\n  option4Change(e){\n    const new_option4=e.target.value;\n    //console.log(e.target.value);\n    this.setState({option4:new_option4});\n  }\n\n  handleSubmit(e){\n      this.props.showSpinner();\n       var reqBody='probDescription='+encodeURIComponent(this.state.description);\n       reqBody+='&option1='+encodeURIComponent(this.state.option1);\n       reqBody+='&option2='+encodeURIComponent(this.state.option2);\n       reqBody+='&option3='+encodeURIComponent(this.state.option3);\n       reqBody+='&option4='+encodeURIComponent(this.state.option4);\n       reqBody+='&answerKey='+encodeURIComponent(this.state.answerkey);\n       reqBody+='&quizId='+encodeURIComponent(this.state.quiz_id);\n\n       var solution=this.state.solution.replace(/%20/g, '+');\n       reqBody+='&ansDescription='+encodeURIComponent(solution);\n       reqBody+='&authorName='+encodeURIComponent(this.props.loggedInUser);\n\n       fetch(`/api/insertProblemAction`, {\n         headers:{\n           'Accept':'application/json',\n           'Content-type': 'application/x-www-form-urlencoded'\n         },\n         method: 'POST',\n         body: reqBody\n       })\n       .then(res=>res.json())\n       .then(data=>{\n             let problemsArrayCopy=[...this.props.problemsArray];\n             let obj={\n               id: data.problemId,\n               quiz_id: this.state.quiz_id,\n               quiz_description: this.state.quiz_description,\n               description:this.state.description,\n               solution:this.state.solution,\n               option1:this.state.option1,\n               option2:this.state.option2,\n               option3:this.state.option3,\n               option4:this.state.option4,\n               answerKey:this.state.answerkey,\n               author_id:this.props.loggedInUser\n             };\n             problemsArrayCopy.push(obj);\n             this.props.setProblems(problemsArrayCopy);\n             this.setState({\n                           description:\"\",\n                           solution:\"\",\n                           option1:\"\",\n                           option2:\"\",\n                           option3:\"\",\n                           option4:\"\",\n                           answerkey:\"\"}\n                         );\n             this.props.hideSpinner();\n           //if(data.updatestatus==\"ok\")\n               alert('problem inserted');\n               window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/problemsBrowse\");\n       })\n\n  }\n\n  render(){\n    if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n    return (\n      <div class=\"InsertWindow\">\n          <a class=\"HomeLink\" href=\"/\">back to home</a>\n          <div class=\"h1\">\n            Insert Problem\n          </div>\n          <fieldset>\n              <div className=\"row\">\n                  <div id=\"flexColLeft\">\n                      Quiz Id:\n                      <select id=\"quizId\" onChange={this.selectChange} name=\"quizId\">\n                      {\n                          this.props.quizesArray.map((objQ, index)=>(\n                                     <option value={objQ.id}>{objQ.description}</option>\n                            )\n                          )\n                      }\n                      </select>\n                      <br/><br/>\n                      Problem Description:<br/>\n                      <textarea id=\"probDescription\" name=\"probDescription\" rows=\"10\" type=\"text\" style={{width:'90%'}}\n                      value={this.state.description}\n                      onChange={this.descriptionChange}\n                      >\n                      </textarea><br/>\n                      Answer Description:<br/>\n                      <textarea id=\"ansDescription\" name=\"ansDescription\" rows=\"10\" type=\"text\" style={{width:'90%'}}\n                      value={this.state.solution}\n                      onChange={this.solutionChange}\n                      >\n                      </textarea>\n                  </div>\n                  <div id=\"flexColRight\">\n                                        <br/><br/>\n                        Option1: <input type=\"text\" style={{width:'100px'}}\n                         onChange={this.option1Change}\n                         id=\"option1\" value={this.state.option1}/><br/><br/>\n                        Option2: <input type=\"text\" style={{width:'100px'}}\n                             onChange={this.option2Change}\n                             id=\"option2\" value={this.state.option2}/><br/><br/>\n                        Option3: <input type=\"text\" style={{width:'100px'}}\n                             onChange={this.option3Change}\n                             id=\"option3\" value={this.state.option3}/><br/><br/>\n                        Option4: <input type=\"text\" style={{width:'100px'}}\n                               onChange={this.option4Change}\n                               id=\"option4\" value={this.state.option4}/><br/><br/>\n                        Answer Key: <br/>\n                        <input type=\"text\" id=\"answerKey\"\n                        onChange={this.answerkeyChange}\n                        style={{width:'100px'}} value={this.state.answerkey}/>\n                        <br/>\n                        <br/>\n                        Author:<br/>\n                        <input id=\"authorName\" name=\"authorName\" type=\"text\" style={{width:'100px'}}\n                        value={this.props.loggedInUser} readonly>\n                        </input> <br/><br/><br/>\n                        <input type=\"button\"  value=\"Insert Problem\" onClick={this.handleSubmit}/>\n                  </div>\n              </div>\n              <div style={{display:'block', paddingTop:'30px', width:'100%'}}>\n\n               </div>\n               <div style={{display:'block', paddingTop:'10px', width:'100%'}}>\n\n               </div>\n           </fieldset>\n      </div>\n    )\n  }\n\n  componentDidMount(){\n    this.props.loadQuizes();\n    /*this.setState({\n      spinner:true\n    });\n    fetch(`/api/getQuizes`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      //console.log(data1);\n      this.setState({spinner:false, quizesArray: data});\n    });*/\n  }\n\n\n}\n\nexport default ProblemInsert;\n"]},"metadata":{},"sourceType":"module"}