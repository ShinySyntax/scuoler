{"ast":null,"code":"var _jsxFileName = \"/home/mathew/javascript/ischools-react/client/src/components/UserShowSelected.js\";\nimport React from 'react';\nimport UserEditDialog from './UserEditDialog';\nimport data from './data';\nimport { Redirect } from 'react-router-dom';\n\nclass UserShowSelected extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showEditUserDialog: false,\n      userObj: {},\n      coursesArray: [],\n      userObjForEdit: {},\n      avatar: data.avatar,\n      icons: data.icons\n    };\n    this.handleEditUserDialogDismiss = this.handleEditUserDialogDismiss.bind(this);\n    this.editUserHandler = this.editUserHandler.bind(this);\n    this.saveUpdateHandler = this.saveUpdateHandler.bind(this);\n    this.firstNameChange = this.firstNameChange.bind(this);\n    this.lastNameChange = this.lastNameChange.bind(this);\n    this.address1Change = this.address1Change.bind(this);\n    this.address2Change = this.address2Change.bind(this);\n    this.selectChange = this.selectChange.bind(this);\n    this.cityChange = this.cityChange.bind(this);\n    this.zipChange = this.zipChange.bind(this);\n    this.phoneChange = this.phoneChange.bind(this);\n    this.mobileChange = this.mobileChange.bind(this);\n    this.emailChange = this.emailChange.bind(this);\n    this.profileImageChange = this.profileImageChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      spinner: true\n    });\n    const {\n      params\n    } = this.props.match;\n    var reqBody = \"userId=\" + encodeURIComponent(params.id); //console.log(params.id);\n\n    fetch(`/api/getTheUser`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    }).then(res => res.json()).then(data => {\n      //console.log(data);\n      data.id = params.id;\n      fetch(`/api/getCourseListForUser`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      }).then(res => res.json()).then(data1 => {\n        //console.log(data1);\n        this.setState({\n          spinner: false,\n          userObj: data,\n          userObjForEdit: data,\n          coursesArray: data1\n        });\n      });\n    });\n  }\n\n  profileImageChange(e) {\n    const files = Array.from(e.target.files);\n    const uploadFile = files[0];\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/svg', 'image/bmp'];\n\n    if (allowedTypes.every(type => uploadFile.type !== type)) {\n      alert('File type not supported (Only png/jpg/gif allowed)');\n      return;\n    } else if (uploadFile.size > 150000) {\n      alert(`'${uploadFile.name}' is too large, please pick a smaller file`);\n      return;\n    } //console.log(uploadFile);\n\n\n    const formData = new FormData();\n    formData.append(0, uploadFile);\n    fetch(`/api/profileImageUpload`, {\n      method: 'POST',\n      body: formData\n    }).then(res => res.json()).then(data => {\n      let image_urls_for_delete = this.state.userObjForEdit.image_urls_for_delete === undefined ? [] : [...this.state.userObjForEdit.image_urls_for_delete];\n      if (this.state.userObjForEdit.profile_image_url !== null) image_urls_for_delete.push(this.state.userObjForEdit.profile_image_url);\n      const copied = Object.assign({}, this.state.userObjForEdit);\n      copied.profile_image_url = data.secure_url;\n      copied.image_urls_for_delete = image_urls_for_delete;\n      this.setState({\n        userObjForEdit: copied\n      });\n      console.log(copied);\n    });\n  }\n\n  firstNameChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.firstName = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  lastNameChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.lastName = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  address1Change(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.address1 = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  address2Change(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.address2 = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  cityChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.city = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  zipChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.zip = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  phoneChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.phone = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  mobileChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.mobile = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  emailChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    copied.email = e.target.value;\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  selectChange(e) {\n    const copied = Object.assign({}, this.state.userObjForEdit);\n    var new_sex_male = e.target.value === \"true\" ? true : false;\n    var new_sex_description = e.target.options[e.target.selectedIndex].text;\n    copied.sex_male = new_sex_male;\n    copied.sex_description = new_sex_description;\n    console.log(copied);\n    this.setState({\n      userObjForEdit: copied\n    });\n  }\n\n  handleEditUserDialogDismiss() {\n    this.setState({\n      userObjForEdit: this.state.userObj,\n      showEditUserDialog: false\n    });\n  }\n\n  editUserHandler() {\n    this.setState({\n      showEditUserDialog: true\n    });\n  }\n\n  saveUpdateHandler() {\n    this.props.showSpinner(); //console.log(newCourseObj);\n\n    var reqBody = \"id=\" + encodeURIComponent(this.state.userObjForEdit.id);\n    reqBody += '&firstName=' + encodeURIComponent(this.state.userObjForEdit.firstName);\n    reqBody += '&lastName=' + encodeURIComponent(this.state.userObjForEdit.lastName);\n    reqBody += '&address1=' + encodeURIComponent(this.state.userObjForEdit.address1);\n    reqBody += '&address2=' + encodeURIComponent(this.state.userObjForEdit.address2);\n    reqBody += '&sex_male=' + encodeURIComponent(this.state.userObjForEdit.sex_male);\n    reqBody += '&city=' + encodeURIComponent(this.state.userObjForEdit.city);\n    reqBody += '&zip=' + encodeURIComponent(this.state.userObjForEdit.zip);\n    reqBody += '&phone=' + encodeURIComponent(this.state.userObjForEdit.phone);\n    reqBody += '&mobile=' + encodeURIComponent(this.state.userObjForEdit.mobile);\n    reqBody += '&email=' + encodeURIComponent(this.state.userObjForEdit.email);\n    reqBody += '&profile_image_url=' + encodeURIComponent(this.state.userObjForEdit.profile_image_url);\n    if (this.state.userObjForEdit.image_urls_for_delete !== undefined) reqBody += '&image_urls_for_delete=' + encodeURIComponent(JSON.stringify(this.state.userObjForEdit.image_urls_for_delete));\n    fetch(`/api/updateUser`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.updatestatus === \"ok\") {\n        this.props.loadUsers();\n        let usersArrayCopy = JSON.parse(JSON.stringify(this.props.usersArray));\n        usersArrayCopy.forEach(obj => {\n          if (obj.id === this.state.userObjForEdit.id) {\n            obj.firstName = this.state.userObjForEdit.firstName;\n            obj.lastName = this.state.userObjForEdit.lastName;\n            obj.address1 = this.state.userObjForEdit.address1;\n            obj.address2 = this.state.userObjForEdit.address2;\n            obj.sex_male = this.state.userObjForEdit.sex_male;\n            obj.city = this.state.userObjForEdit.city;\n            obj.zip = this.state.userObjForEdit.zip;\n            obj.mobile = this.state.userObjForEdit.mobile;\n            obj.phone = this.state.userObjForEdit.phone;\n            obj.email = this.state.userObjForEdit.email;\n            obj.profile_image_url = this.state.userObjForEdit.profile_image_url;\n          }\n        });\n        let copyObj = Object.assign({}, this.state.userObjForEdit);\n        copyObj.image_urls_for_delete = [];\n        this.props.setUsers(usersArrayCopy);\n        this.setState({\n          userObj: copyObj,\n          showEditUserDialog: false\n        });\n        this.props.hideSpinner();\n        alert('User updated');\n      }\n    });\n  }\n\n  render() {\n    {}\n    /*if(this.props.loggedInUser===''){\n     return <Redirect to=\"/errorLogin\"/>\n    }*/\n    //console.log(this.state.userObj);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"HomeLink\",\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"homeIcon\",\n      src: this.state.icons.home,\n      alt: \"back to home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 7\n      }\n    }, \"User Profile\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }\n    }, this.state.userObj.firstName, \" \", this.state.userObj.lastName), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 16\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profileParent\",\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profileCard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.userObj.profile_image_url != null ? this.state.userObj.profile_image_url : this.state.userObj.sex_male == true ? this.state.avatar.male : this.state.avatar.female,\n      alt: \"Avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 16\n      }\n    }), this.props.loggedInUser === this.state.userObj.id || this.props.admin === \"1\" ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      className: \"LeftButton\",\n      onClick: () => this.editUserHandler(),\n      id: `e${this.state.userObj.id}`,\n      value: \"Edit User\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 14\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }\n    }, \"Address:\"), \" \", this.state.userObj.address1, \" \", this.state.userObj.address2, \"  \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 88\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 14\n      }\n    }, \"Sex:\"), \" \", this.state.userObj.sex_male === true ? \"Male\" : \"Female\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }\n    }, \"  \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 16\n      }\n    }, \"City:\"), \" \", this.state.userObj.city), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }\n    }, \"  \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 16\n      }\n    }, \"Zip:\"), \" \", this.state.userObj.zip), /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }\n    }, \"Phone:\"), \" \", this.state.userObj.phone, \"  \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 58\n      }\n    }), /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    }, \"Mobile:\"), \" \", this.state.userObj.mobile, \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 54\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 59\n      }\n    }), /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }\n    }, \"Email:\"), \" \", this.state.userObj.email, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }, \"List of Courses:\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 20\n      }\n    }), this.state.coursesArray.map(obj => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: `http://${window.location.hostname}:${window.location.port}/courseShowSelected/${obj.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 23\n      }\n    }, obj.name), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 137\n      }\n    }))))), /*#__PURE__*/React.createElement(UserEditDialog, {\n      objectForEdit: this.state.userObjForEdit,\n      show: this.state.showEditUserDialog,\n      handleDismiss: this.handleEditUserDialogDismiss,\n      handleSubmit: this.saveUpdateHandler,\n      firstNameChange: this.firstNameChange,\n      lastNameChange: this.lastNameChange,\n      address1Change: this.address1Change,\n      address2Change: this.address2Change,\n      selectChange: this.selectChange,\n      cityChange: this.cityChange,\n      zipChange: this.zipChange,\n      phoneChange: this.phoneChange,\n      mobileChange: this.mobileChange,\n      emailChange: this.emailChange,\n      profileImageChange: this.profileImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default UserShowSelected;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/UserShowSelected.js"],"names":["React","UserEditDialog","data","Redirect","UserShowSelected","Component","constructor","props","state","showEditUserDialog","userObj","coursesArray","userObjForEdit","avatar","icons","handleEditUserDialogDismiss","bind","editUserHandler","saveUpdateHandler","firstNameChange","lastNameChange","address1Change","address2Change","selectChange","cityChange","zipChange","phoneChange","mobileChange","emailChange","profileImageChange","componentDidMount","setState","spinner","params","match","reqBody","encodeURIComponent","id","fetch","headers","method","body","then","res","json","data1","e","files","Array","from","target","uploadFile","allowedTypes","every","type","alert","size","name","formData","FormData","append","image_urls_for_delete","undefined","profile_image_url","push","copied","Object","assign","secure_url","console","log","firstName","value","lastName","address1","address2","city","zip","phone","mobile","email","new_sex_male","new_sex_description","options","selectedIndex","text","sex_male","sex_description","showSpinner","JSON","stringify","updatestatus","loadUsers","usersArrayCopy","parse","usersArray","forEach","obj","copyObj","setUsers","hideSpinner","render","home","width","textAlign","male","female","loggedInUser","admin","map","window","location","hostname","port"],"mappings":"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","sourcesContent":["import React from 'react';\nimport UserEditDialog from './UserEditDialog';\nimport data from './data';\nimport {  Redirect } from 'react-router-dom';\n\nclass UserShowSelected extends React.Component{\n  constructor(props){\n    super(props);\n    this.state={\n      showEditUserDialog:false,\n      userObj:{},\n      coursesArray:[],\n      userObjForEdit:{},\n      avatar: data.avatar,\n      icons: data.icons\n    }\n    this.handleEditUserDialogDismiss=this.handleEditUserDialogDismiss.bind(this);\n    this.editUserHandler=this.editUserHandler.bind(this);\n    this.saveUpdateHandler=this.saveUpdateHandler.bind(this);\n    this.firstNameChange=this.firstNameChange.bind(this);\n    this.lastNameChange=this.lastNameChange.bind(this);\n    this.address1Change=this.address1Change.bind(this);\n    this.address2Change=this.address2Change.bind(this);\n    this.selectChange=this.selectChange.bind(this);\n    this.cityChange=this.cityChange.bind(this);\n    this.zipChange=this.zipChange.bind(this);\n    this.phoneChange=this.phoneChange.bind(this);\n    this.mobileChange=this.mobileChange.bind(this);\n    this.emailChange=this.emailChange.bind(this);\n    this.profileImageChange=this.profileImageChange.bind(this);\n  }\n\n  componentDidMount(){\n    this.setState({spinner:true});\n    const {params}= this.props.match;\n\n    var reqBody=\"userId=\"+encodeURIComponent(params.id);\n    //console.log(params.id);\n    fetch(`/api/getTheUser`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n       //console.log(data);\n      data.id=params.id;\n      fetch(`/api/getCourseListForUser`,{\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data1=>{\n          //console.log(data1);\n          this.setState({spinner:false, userObj: data, userObjForEdit: data, coursesArray: data1});\n      })\n    })\n  }\n\n  profileImageChange(e){\n     const files = Array.from(e.target.files);\n     const uploadFile=files[0];\n     const allowedTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/svg', 'image/bmp'];\n\n     if (allowedTypes.every(type => uploadFile.type !== type)) {\n        alert('File type not supported (Only png/jpg/gif allowed)');\n        return;\n     }\n     else if (uploadFile.size > 150000) {\n        alert(`'${uploadFile.name}' is too large, please pick a smaller file`);\n        return;\n     }\n\n     //console.log(uploadFile);\n\n     const formData = new FormData();\n      formData.append(0, uploadFile);\n\n      fetch(`/api/profileImageUpload`, {\n        method: 'POST',\n        body: formData\n      })\n      .then(res=>res.json())\n      .then(data=>{\n\n        let image_urls_for_delete=this.state.userObjForEdit.image_urls_for_delete===undefined?[]:[...this.state.userObjForEdit.image_urls_for_delete];\n        if(this.state.userObjForEdit.profile_image_url!==null)\n          image_urls_for_delete.push(this.state.userObjForEdit.profile_image_url);\n\n        const copied = Object.assign({}, this.state.userObjForEdit);\n        copied.profile_image_url=data.secure_url;\n        copied.image_urls_for_delete=image_urls_for_delete;\n        this.setState({userObjForEdit:copied});\n        console.log(copied);\n      });\n\n  }\n\n  firstNameChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.firstName=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  lastNameChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.lastName=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  address1Change(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.address1=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  address2Change(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.address2=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  cityChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.city=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  zipChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.zip=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  phoneChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.phone=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  mobileChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.mobile=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n  emailChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.email=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  selectChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    var new_sex_male=e.target.value===\"true\"?true:false;\n    var new_sex_description=e.target.options[e.target.selectedIndex].text;\n    copied.sex_male=new_sex_male;\n    copied.sex_description=new_sex_description;\n      console.log(copied);\n    this.setState({userObjForEdit:copied});\n  }\n\n  handleEditUserDialogDismiss(){\n    this.setState({userObjForEdit: this.state.userObj, showEditUserDialog:false});\n  }\n\n  editUserHandler(){\n    this.setState({showEditUserDialog:true});\n  }\n\n  saveUpdateHandler(){\n    this.props.showSpinner();\n    //console.log(newCourseObj);\n    var reqBody=\"id=\"+encodeURIComponent(this.state.userObjForEdit.id);\n    reqBody+='&firstName='+encodeURIComponent(this.state.userObjForEdit.firstName);\n    reqBody+='&lastName='+encodeURIComponent(this.state.userObjForEdit.lastName);\n    reqBody+='&address1='+encodeURIComponent(this.state.userObjForEdit.address1);\n    reqBody+='&address2='+encodeURIComponent(this.state.userObjForEdit.address2);\n    reqBody+='&sex_male='+encodeURIComponent(this.state.userObjForEdit.sex_male);\n    reqBody+='&city='+encodeURIComponent(this.state.userObjForEdit.city);\n    reqBody+='&zip='+encodeURIComponent(this.state.userObjForEdit.zip);\n    reqBody+='&phone='+encodeURIComponent(this.state.userObjForEdit.phone);\n    reqBody+='&mobile='+encodeURIComponent(this.state.userObjForEdit.mobile);\n    reqBody+='&email='+encodeURIComponent(this.state.userObjForEdit.email);\n    reqBody+='&profile_image_url='+encodeURIComponent(this.state.userObjForEdit.profile_image_url);\n    if(this.state.userObjForEdit.image_urls_for_delete!==undefined)\n        reqBody+='&image_urls_for_delete='+encodeURIComponent(JSON.stringify(this.state.userObjForEdit.image_urls_for_delete));\n\n    fetch(`/api/updateUser`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      console.log(data);\n        if(data.updatestatus===\"ok\"){\n            this.props.loadUsers();\n            let usersArrayCopy=JSON.parse(JSON.stringify(this.props.usersArray));\n            usersArrayCopy.forEach((obj)=>{\n              if(obj.id===this.state.userObjForEdit.id){\n                 obj.firstName=this.state.userObjForEdit.firstName;\n                 obj.lastName=this.state.userObjForEdit.lastName;\n                 obj.address1=this.state.userObjForEdit.address1;\n                 obj.address2=this.state.userObjForEdit.address2;\n                 obj.sex_male=this.state.userObjForEdit.sex_male;\n                 obj.city=this.state.userObjForEdit.city;\n                 obj.zip=this.state.userObjForEdit.zip;\n                 obj.mobile=this.state.userObjForEdit.mobile;\n                 obj.phone=this.state.userObjForEdit.phone;\n                 obj.email=this.state.userObjForEdit.email;\n                 obj.profile_image_url=this.state.userObjForEdit.profile_image_url;\n              }\n            });\n            let copyObj=Object.assign({},this.state.userObjForEdit);\n            copyObj.image_urls_for_delete=[];\n            this.props.setUsers(usersArrayCopy);\n            this.setState({userObj: copyObj, showEditUserDialog:false});\n            this.props.hideSpinner();\n            alert('User updated');\n        }\n    })\n  }\n\n  render(){\n    {/*if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }*/}\n    //console.log(this.state.userObj);\n\n    return (\n      <div>\n      <a className=\"HomeLink\" href=\"/\">\n          <img class=\"homeIcon\" src={this.state.icons.home} alt=\"back to home\"/>\n          {/*back to home*/}\n      </a>\n      <div class=\"h1\">\n        User Profile\n      </div>\n      <div className=\"Panel\">\n          {/*\n            this.state.spinner===true?(<div id=\"spinner\" className=\"container\"><div className=\"loading\"></div></div>):null\n          */}\n          <div class=\"h1\">\n            {this.state.userObj.firstName} {this.state.userObj.lastName}\n          </div>\n          <br/><br/>\n          <div className=\"profileParent\" style={{width:'100%', textAlign:'center'}}>\n              <div className=\"profileCard\">\n                <img src={this.state.userObj.profile_image_url!=null?this.state.userObj.profile_image_url: ( this.state.userObj.sex_male==true?this.state.avatar.male:this.state.avatar.female)} alt=\"Avatar\"/>\n                {/*<div class=\"profileCardOverlay\">Upload Image</div>*/}\n              </div>\n          </div>\n          <br/><br/>\n          {(this.props.loggedInUser===this.state.userObj.id||this.props.admin===\"1\")?\n            (<input type=\"button\" className=\"LeftButton\"\n            onClick={()=>this.editUserHandler()}\n            id={`e${this.state.userObj.id}`} value=\"Edit User\"/>):null\n          }\n          <br/> <br/>\n          <b>Address:</b> {this.state.userObj.address1} {this.state.userObj.address2}  <br/>\n          <p><b>Sex:</b> {this.state.userObj.sex_male===true?\"Male\":\"Female\"}</p>\n          <p>  <b>City:</b> {this.state.userObj.city}</p>\n          <p>  <b>Zip:</b> {this.state.userObj.zip}</p>\n          <b>Phone:</b> {this.state.userObj.phone}  <br/><br/>\n          <b>Mobile:</b> {this.state.userObj.mobile} <br/><br/>\n          <b>Email:</b> {this.state.userObj.email}\n          <div className=\"row\">\n            <div>\n              <br/>\n              <b>List of Courses:</b>\n              <br/><br/>\n              {\n                this.state.coursesArray.map(obj=>(\n                   <div>\n                      <a href={`http://${window.location.hostname}:${window.location.port}/courseShowSelected/${obj.id}`}>{obj.name}</a><br/>\n                   </div>\n                  )\n                )\n              }\n            </div>\n          </div>\n          <UserEditDialog\n                  objectForEdit={this.state.userObjForEdit}\n                  show={this.state.showEditUserDialog}\n                  handleDismiss={this.handleEditUserDialogDismiss}\n                  handleSubmit={this.saveUpdateHandler}\n                  firstNameChange={this.firstNameChange}\n                  lastNameChange={this.lastNameChange}\n                  address1Change={this.address1Change}\n                  address2Change={this.address2Change}\n                  selectChange={this.selectChange}\n                  cityChange={this.cityChange}\n                  zipChange={this.zipChange}\n                  phoneChange={this.phoneChange}\n                  mobileChange={this.mobileChange}\n                  emailChange={this.emailChange}\n                  profileImageChange={this.profileImageChange}\n          />\n     </div>\n     </div>\n    )\n  }\n\n\n}\n\nexport default UserShowSelected;\n"]},"metadata":{},"sourceType":"module"}