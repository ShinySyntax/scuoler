{"ast":null,"code":"import _classCallCheck from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./css/App.css';import Header from'./components/Header';import ImageSlider from'./components/ImageSlider';import DropdownMenuHover from'./components/DropdownMenuHover';import ProblemsBrowse from'./components/ProblemsBrowse';import ProblemInsert from'./components/ProblemInsert';import QuizesBrowse from'./components/QuizesBrowse';import QuizInsert from'./components/QuizInsert';import QuizShowSelected from'./components/QuizShowSelected';import UsersBrowse from'./components/UsersBrowse';import UserInsert from'./components/UserInsert';import UserShowSelected from'./components/UserShowSelected';import CoursesBrowse from'./components/CoursesBrowse';import CourseInsert from'./components/CourseInsert';import CourseShowSelected from'./components/CourseShowSelected';import{Route,BrowserRouter as Router}from'react-router-dom';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={spinner:false,userId:null,password:null,loggedInUser:localStorage.getItem('loggedInUser')||'',admin:localStorage.getItem('admin')||\"0\",errorMessage:null,coursesArray:[],problemsArray:[],quizesArray:[],usersArray:[],startedQuiz:localStorage.getItem('startedQuiz')?JSON.parse(localStorage.getItem('startedQuiz')):null,startedQuizAnswers:localStorage.getItem('startedQuizAnswers')?JSON.parse(localStorage.getItem('startedQuizAnswers')):null};_this.userIdChange=_this.userIdChange.bind(_assertThisInitialized(_this));_this.passwordChange=_this.passwordChange.bind(_assertThisInitialized(_this));_this.handleLoginSubmit=_this.handleLoginSubmit.bind(_assertThisInitialized(_this));_this.logoutUser=_this.logoutUser.bind(_assertThisInitialized(_this));_this.setErrorMessage=_this.setErrorMessage.bind(_assertThisInitialized(_this));_this.setCourses=_this.setCourses.bind(_assertThisInitialized(_this));_this.setProblems=_this.setProblems.bind(_assertThisInitialized(_this));_this.setQuizes=_this.setQuizes.bind(_assertThisInitialized(_this));_this.setUsers=_this.setUsers.bind(_assertThisInitialized(_this));_this.loadCourses=_this.loadCourses.bind(_assertThisInitialized(_this));_this.loadProblems=_this.loadProblems.bind(_assertThisInitialized(_this));_this.loadQuizes=_this.loadQuizes.bind(_assertThisInitialized(_this));_this.loadUsers=_this.loadUsers.bind(_assertThisInitialized(_this));_this.showSpinner=_this.showSpinner.bind(_assertThisInitialized(_this));_this.hideSpinner=_this.hideSpinner.bind(_assertThisInitialized(_this));_this.startQuiz=_this.startQuiz.bind(_assertThisInitialized(_this));_this.isQuizStarted=_this.isQuizStarted.bind(_assertThisInitialized(_this));_this.startedQuizOptionChange=_this.startedQuizOptionChange.bind(_assertThisInitialized(_this));_this.startedQuizSubmit=_this.startedQuizSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var timer=setInterval(function(){_this2.reviseQuizMinsRemaining();},60000);}},{key:\"loadCourses\",value:function loadCourses(){var _this3=this;this.setState({spinner:true});fetch(\"/api/getCourses\",{headers:{'Accept':'application/json'}}).then(function(res){return res.json();}).then(function(data){//console.log(data);\n_this3.setState({coursesArray:data,spinner:false});});}},{key:\"setCourses\",value:function setCourses(arr){this.setState({coursesArray:arr});}},{key:\"startedQuizOptionChange\",value:function startedQuizOptionChange(problemId,optionSelectedValue){var copied=Object.assign({},this.state.startedQuizAnswers);copied[problemId]=optionSelectedValue;this.setState({startedQuizAnswers:copied});//console.log(copied);\nlocalStorage.setItem('startedQuizAnswers',JSON.stringify(copied));}},{key:\"startQuiz\",value:function startQuiz(quizObj){var _this4=this;if(this.state.startedQuiz===null){if(window.confirm('Are you sure you want to start the quiz:\\r\\n'+quizObj.description)===true){var current_timestamp=new Date();var mm=current_timestamp.getMonth()+1;mm=mm<10?\"0\"+mm:\"\"+mm;var dd=current_timestamp.getDate();dd=dd<10?\"0\"+dd:\"\"+dd;var hh=current_timestamp.getHours();hh=hh<10?\"0\"+hh:\"\"+hh;var mins=current_timestamp.getMinutes();mins=mins<10?\"0\"+mins:\"\"+mins;var ss=current_timestamp.getSeconds();ss=ss<10?\"0\"+ss:\"\"+ss;quizObj['start_time']=current_timestamp.getFullYear()+'-'+mm+'-'+dd+'T'+hh+':'+mins+':'+ss;quizObj['mins_remaining']=quizObj['duration_minutes'];var reqBody=\"quizId=\"+encodeURIComponent(quizObj.id);reqBody+='&startTime='+encodeURIComponent(quizObj.start_time);reqBody+='&userId='+encodeURIComponent(this.state.loggedInUser);fetch(\"api/quizStart\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.insertstatus===\"ok\"){quizObj['quizInstanceId']=data.quizInstanceId;_this4.setState({startedQuiz:quizObj});localStorage.setItem('startedQuiz',JSON.stringify(quizObj));}else{alert('An error occurred in connecting to the server to start the quiz');}});}}else{alert('There is already a started quiz:\\r\\n'+this.state.startedQuiz.description+'\\r\\n Please submit this quiz to start a new quiz');}console.log(this.state.startedQuiz);}},{key:\"startedQuizSubmit\",value:function startedQuizSubmit(){var _this5=this;console.log(this.state.startedQuizAnswers);console.log(this.state.startedQuiz);var reqBody=\"quizId=\"+encodeURIComponent(this.state.startedQuiz.id);reqBody+='&quizInstanceId='+encodeURIComponent(this.state.startedQuiz.quizInstanceId);reqBody+='&answersObject='+encodeURIComponent(JSON.stringify(this.state.startedQuizAnswers));fetch(\"/api/quizAnwersSubmit\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){//console.log(data);\nif(data.insertstatus===\"ok\"){localStorage.removeItem('startedQuiz');localStorage.removeItem('startedQuizAnswers');_this5.setState({startedQuiz:null,startedQuizAnswers:null});alert('Quiz Submitted');}});}},{key:\"reviseQuizMinsRemaining\",value:function reviseQuizMinsRemaining(){if(this.state.startedQuiz!==null){var start_timestamp=Date.parse(this.state.startedQuiz.start_time);var startTime=new Date();startTime.setTime(start_timestamp);var current_timestamp=Date.now();var MsRemaining=start_timestamp+parseInt(this.state.startedQuiz.duration_minutes)*60*1000-current_timestamp;//var mins_remaining = Math.round(((MsRemaining % 86400000) % 3600000) / 60000); // minutes\nvar mins_remaining=Math.round(MsRemaining/60000);if(mins_remaining>0){console.log(startTime);console.log(mins_remaining);var copied=Object.assign({},this.state.startedQuiz);copied['mins_remaining']=mins_remaining;this.setState({startedQuiz:copied});localStorage.setItem('startedQuiz',JSON.stringify(copied));}else{this.startedQuizSubmit();}}}},{key:\"isQuizStarted\",value:function isQuizStarted(quizId){if(this.state.startedQuiz!==null&&this.state.startedQuiz.id===quizId)return true;else return false;}},{key:\"loadProblems\",value:function loadProblems(){var _this6=this;this.setState({spinner:true});fetch(\"/api/getProblems\",{headers:{'Accept':'application/json'}}).then(function(res){return res.json();}).then(function(data){_this6.setState({problemsArray:data,spinner:false});});}},{key:\"setProblems\",value:function setProblems(arr){this.setState({problemsArray:arr});}},{key:\"loadQuizes\",value:function loadQuizes(){var _this7=this;this.setState({spinner:true});fetch(\"/api/getQuizes\",{headers:{'Accept':'application/json'}}).then(function(res){return res.json();}).then(function(data){//console.log(data);\n_this7.setState({quizesArray:data,spinner:false});});}},{key:\"setQuizes\",value:function setQuizes(arr){this.setState({quizesArray:arr});}},{key:\"loadUsers\",value:function loadUsers(){var _this8=this;this.setState({spinner:true});fetch(\"/api/getUsers\",{headers:{'Accept':'application/json'}}).then(function(res){return res.json();}).then(function(data){_this8.setState({usersArray:data,spinner:false});});}},{key:\"setUsers\",value:function setUsers(arr){this.setState({usersArray:arr});}},{key:\"showSpinner\",value:function showSpinner(){this.setState({spinner:true});}},{key:\"hideSpinner\",value:function hideSpinner(){this.setState({spinner:false});}},{key:\"handleLoginSubmit\",value:function handleLoginSubmit(event){var _this9=this;if(this.state.userId===null||this.state.password===null||this.state.password.length===0||this.state.userId.length===0){event.preventDefault();this.setState({errorMessage:\"UserId/password cannot be empty\"});return;}var reqBody=\"userId=\"+encodeURIComponent(this.state.userId);reqBody+='&password='+encodeURIComponent(this.state.password);fetch(\"/api/login\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.login===\"ok\"){localStorage.setItem('loggedInUser',_this9.state.userId);localStorage.setItem('admin',data.admin);_this9.setState({errorMessage:null,loggedInUser:_this9.state.userId,admin:data.admin});}else{_this9.setState({errorMessage:\"Login Failed: UserId/password Mismatch\"});}});event.preventDefault();}},{key:\"userIdChange\",value:function userIdChange(e){var newUserId=e.target.value;this.setState({userId:newUserId});}},{key:\"passwordChange\",value:function passwordChange(e){var newPassword=e.target.value;this.setState({password:newPassword});}},{key:\"logoutUser\",value:function logoutUser(e){//e.preventDefault();\nvar b=window.confirm('Are you sure you want to logout');if(b===true){if(this.state.startedQuiz!==null)this.startedQuizSubmit();localStorage.setItem('loggedInUser','');localStorage.setItem('admin',\"0\");localStorage.removeItem('startedQuiz');localStorage.removeItem('startedQuizAnswers');this.setState({errorMessage:null,loggedInUser:'',admin:\"0\",startedQuiz:null,startedQuizAnswers:null});}else{e.preventDefault();}}},{key:\"setErrorMessage\",value:function setErrorMessage(errMsg){this.setState({errorMessage:errMsg});}},{key:\"render\",value:function render(){var _this10=this;return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Route,{path:\"/\",render:function render(props){return/*#__PURE__*/React.createElement(Header,Object.assign({},props,{userId:_this10.state.userId,password:_this10.state.password,errorMessage:_this10.state.errorMessage,passwordChange:_this10.passwordChange,userIdChange:_this10.userIdChange,handleSubmit:_this10.handleLoginSubmit,logoutUser:_this10.logoutUser,loggedInUser:_this10.state.loggedInUser,startedQuiz:_this10.state.startedQuiz}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/\",render:function render(props){return/*#__PURE__*/React.createElement(DropdownMenuHover,Object.assign({},props,{loggedInUser:_this10.state.loggedInUser,setErrorMessage:_this10.setErrorMessage}));}}),this.state.spinner===true?/*#__PURE__*/React.createElement(\"div\",{id:\"spinner\",className:\"loadingContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"})):null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:ImageSlider}),/*#__PURE__*/React.createElement(Route,{path:\"/problemsBrowse\",render:function render(props){return/*#__PURE__*/React.createElement(ProblemsBrowse,Object.assign({},props,{problemsArray:_this10.state.problemsArray,quizesArray:_this10.state.quizesArray,loadProblems:_this10.loadProblems,setProblems:_this10.setProblems,loadQuizes:_this10.loadQuizes,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser,admin:_this10.state.admin}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/problemInsert\",render:function render(props){return/*#__PURE__*/React.createElement(ProblemInsert,Object.assign({},props,{problemsArray:_this10.state.problemsArray,quizesArray:_this10.state.quizesArray,loadQuizes:_this10.loadQuizes,setProblems:_this10.setProblems,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/quizesBrowse\",render:function render(props){return/*#__PURE__*/React.createElement(QuizesBrowse,{quizesArray:_this10.state.quizesArray,loadQuizes:_this10.loadQuizes});}}),/*#__PURE__*/React.createElement(Route,{path:\"/quizInsert\",render:function render(props){return/*#__PURE__*/React.createElement(QuizInsert,Object.assign({},props,{quizesArray:_this10.state.quizesArray,coursesArray:_this10.state.coursesArray,loadCourses:_this10.loadCourses,setQuizes:_this10.setQuizes,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/quizShowSelected/:id\",render:function render(props){return/*#__PURE__*/React.createElement(QuizShowSelected,Object.assign({},props,{loadQuizes:_this10.loadQuizes,quizesArray:_this10.state.quizesArray,setQuizes:_this10.setQuizes,loadCourses:_this10.loadCourses,coursesArray:_this10.state.coursesArray,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser,startQuiz:_this10.startQuiz,admin:_this10.state.admin,setErrorMessage:_this10.setErrorMessage,isQuizStarted:_this10.isQuizStarted,optionChange:_this10.startedQuizOptionChange,submitQuiz:_this10.startedQuizSubmit,startedQuizAnswers:_this10.state.startedQuizAnswers}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/usersBrowse\",render:function render(props){return/*#__PURE__*/React.createElement(UsersBrowse,Object.assign({},props,{usersArray:_this10.state.usersArray,loadUsers:_this10.loadUsers}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/userInsert\",render:function render(props){return/*#__PURE__*/React.createElement(UserInsert,Object.assign({},props,{usersArray:_this10.state.usersArray,setUsers:_this10.setUsers,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/UserShowSelected/:id\",render:function render(props){return/*#__PURE__*/React.createElement(UserShowSelected,Object.assign({},props,{loadUsers:_this10.loadUsers,usersArray:_this10.state.usersArray,setUsers:_this10.setUsers,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser,admin:_this10.state.admin,setErrorMessage:_this10.setErrorMessage}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/coursesBrowse\",render:function render(props){return/*#__PURE__*/React.createElement(CoursesBrowse,{coursesArray:_this10.state.coursesArray,loadCourses:_this10.loadCourses});}}),/*#__PURE__*/React.createElement(Route,{path:\"/courseInsert\",render:function render(props){return/*#__PURE__*/React.createElement(CourseInsert,Object.assign({},props,{coursesArray:_this10.state.coursesArray,setCourses:_this10.setCourses,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/CourseShowSelected/:id\",render:function render(props){return/*#__PURE__*/React.createElement(CourseShowSelected,Object.assign({},props,{loadCourses:_this10.loadCourses,coursesArray:_this10.state.coursesArray,setCourses:_this10.setCourses,showSpinner:_this10.showSpinner,hideSpinner:_this10.hideSpinner,loggedInUser:_this10.state.loggedInUser,admin:_this10.state.admin,setErrorMessage:_this10.setErrorMessage}));}}),this.state.loggedInUser===\"\"&&/*#__PURE__*/React.createElement(Route,{path:\"/errorLogin\",render:function render(props){return/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\",fontSize:\"1.5em\",paddingTop:\"1%\",textAlign:\"center\"}},\"Error: User not Logged In!\");}})));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/App.js"],"names":["React","Header","ImageSlider","DropdownMenuHover","ProblemsBrowse","ProblemInsert","QuizesBrowse","QuizInsert","QuizShowSelected","UsersBrowse","UserInsert","UserShowSelected","CoursesBrowse","CourseInsert","CourseShowSelected","Route","BrowserRouter","Router","App","props","state","spinner","userId","password","loggedInUser","localStorage","getItem","admin","errorMessage","coursesArray","problemsArray","quizesArray","usersArray","startedQuiz","JSON","parse","startedQuizAnswers","userIdChange","bind","passwordChange","handleLoginSubmit","logoutUser","setErrorMessage","setCourses","setProblems","setQuizes","setUsers","loadCourses","loadProblems","loadQuizes","loadUsers","showSpinner","hideSpinner","startQuiz","isQuizStarted","startedQuizOptionChange","startedQuizSubmit","timer","setInterval","reviseQuizMinsRemaining","setState","fetch","headers","then","res","json","data","arr","problemId","optionSelectedValue","copied","Object","assign","setItem","stringify","quizObj","window","confirm","description","current_timestamp","Date","mm","getMonth","dd","getDate","hh","getHours","mins","getMinutes","ss","getSeconds","getFullYear","reqBody","encodeURIComponent","id","start_time","method","body","console","log","insertstatus","quizInstanceId","alert","removeItem","start_timestamp","startTime","setTime","now","MsRemaining","parseInt","duration_minutes","mins_remaining","Math","round","quizId","event","length","preventDefault","login","e","newUserId","target","value","newPassword","b","errMsg","color","fontSize","paddingTop","textAlign","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './css/App.css';\nimport Header from './components/Header';\nimport ImageSlider from './components/ImageSlider';\nimport DropdownMenuHover from './components/DropdownMenuHover';\nimport ProblemsBrowse from './components/ProblemsBrowse';\nimport ProblemInsert from './components/ProblemInsert';\nimport QuizesBrowse from './components/QuizesBrowse';\nimport QuizInsert from './components/QuizInsert';\nimport QuizShowSelected from './components/QuizShowSelected';\nimport UsersBrowse from './components/UsersBrowse';\nimport UserInsert from './components/UserInsert';\nimport UserShowSelected from './components/UserShowSelected';\nimport CoursesBrowse from './components/CoursesBrowse';\nimport CourseInsert from './components/CourseInsert';\nimport CourseShowSelected from './components/CourseShowSelected';\nimport { Route, BrowserRouter as Router} from 'react-router-dom'\n\nclass App extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.state={\n      spinner:false,\n      userId:null,\n      password:null,\n      loggedInUser:localStorage.getItem('loggedInUser') || '',\n      admin:localStorage.getItem('admin')||\"0\",\n      errorMessage:null,\n      coursesArray:[],\n      problemsArray:[],\n      quizesArray:[],\n      usersArray:[],\n      startedQuiz:localStorage.getItem('startedQuiz')?JSON.parse(localStorage.getItem('startedQuiz')):null,\n      startedQuizAnswers:localStorage.getItem('startedQuizAnswers')?JSON.parse(localStorage.getItem('startedQuizAnswers')):null\n    }\n    this.userIdChange=this.userIdChange.bind(this);\n    this.passwordChange=this.passwordChange.bind(this);\n    this.handleLoginSubmit=this.handleLoginSubmit.bind(this);\n    this.logoutUser=this.logoutUser.bind(this);\n    this.setErrorMessage=this.setErrorMessage.bind(this);\n    this.setCourses=this.setCourses.bind(this);\n    this.setProblems=this.setProblems.bind(this);\n    this.setQuizes=this.setQuizes.bind(this);\n    this.setUsers=this.setUsers.bind(this);\n    this.loadCourses=this.loadCourses.bind(this);\n    this.loadProblems=this.loadProblems.bind(this);\n    this.loadQuizes=this.loadQuizes.bind(this);\n    this.loadUsers=this.loadUsers.bind(this);\n    this.showSpinner=this.showSpinner.bind(this);\n    this.hideSpinner=this.hideSpinner.bind(this);\n    this.startQuiz=this.startQuiz.bind(this);\n    this.isQuizStarted=this.isQuizStarted.bind(this);\n    this.startedQuizOptionChange=this.startedQuizOptionChange.bind(this);\n    this.startedQuizSubmit=this.startedQuizSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    var timer = setInterval(() => {this.reviseQuizMinsRemaining();}, 60000)\n  }\n\n  loadCourses(){\n    this.setState({spinner:true});\n    fetch(`/api/getCourses`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      //console.log(data);\n      this.setState({coursesArray: data, spinner: false});\n    })\n  }\n\n  setCourses(arr){\n    this.setState({coursesArray:arr});\n  }\n\n  startedQuizOptionChange(problemId, optionSelectedValue){\n    const copied = Object.assign({}, this.state.startedQuizAnswers);\n    copied[problemId]=optionSelectedValue;\n    this.setState({startedQuizAnswers:copied});\n    //console.log(copied);\n    localStorage.setItem('startedQuizAnswers', JSON.stringify(copied));\n  }\n\n  startQuiz(quizObj){\n    if(this.state.startedQuiz===null){\n      if(window.confirm('Are you sure you want to start the quiz:\\r\\n'+quizObj.description)===true){\n        const current_timestamp=new Date();\n        let mm=current_timestamp.getMonth()+1;\n        mm=mm<10?\"0\"+mm:\"\"+mm;\n        let dd=current_timestamp.getDate();\n        dd=dd<10?\"0\"+dd:\"\"+dd;\n        let hh=current_timestamp.getHours();\n        hh=hh<10?\"0\"+hh:\"\"+hh;\n        let mins=current_timestamp.getMinutes();\n        mins=mins<10?\"0\"+mins:\"\"+mins;\n        let ss=current_timestamp.getSeconds();\n        ss=ss<10?\"0\"+ss:\"\"+ss;\n        quizObj['start_time']=current_timestamp.getFullYear()+'-'+mm+'-'+\n        dd+'T'+hh+':'+mins+':'+ss;\n        quizObj['mins_remaining']=quizObj['duration_minutes'];\n        var reqBody=\"quizId=\"+encodeURIComponent(quizObj.id);\n            reqBody+='&startTime='+encodeURIComponent(quizObj.start_time);\n            reqBody+='&userId='+encodeURIComponent(this.state.loggedInUser);\n        fetch(`api/quizStart`, {\n          headers:{\n            'Accept':'application/json',\n            'Content-type': 'application/x-www-form-urlencoded'\n          },\n          method: 'POST',\n          body: reqBody\n        })\n        .then(res=>res.json())\n        .then(\n          data=>{\n            console.log(data);\n            if(data.insertstatus=== \"ok\"){\n              quizObj['quizInstanceId']=data.quizInstanceId;\n              this.setState({startedQuiz:quizObj});\n              localStorage.setItem('startedQuiz', JSON.stringify(quizObj));\n            }\n            else{\n              alert('An error occurred in connecting to the server to start the quiz');\n            }\n          });\n      }\n    }\n    else{\n      alert('There is already a started quiz:\\r\\n'+\n             this.state.startedQuiz.description+\n            '\\r\\n Please submit this quiz to start a new quiz')\n    }\n     console.log(this.state.startedQuiz);\n  }\n\n  startedQuizSubmit(){\n    console.log(this.state.startedQuizAnswers);\n    console.log(this.state.startedQuiz);\n\n    var reqBody=\"quizId=\"+encodeURIComponent(this.state.startedQuiz.id);\n        reqBody+='&quizInstanceId='+encodeURIComponent(this.state.startedQuiz.quizInstanceId);\n        reqBody+='&answersObject='+encodeURIComponent(JSON.stringify(this.state.startedQuizAnswers));\n\n        fetch(`/api/quizAnwersSubmit`, {\n          headers:{\n            'Accept':'application/json',\n            'Content-type': 'application/x-www-form-urlencoded'\n          },\n          method: 'POST',\n          body: reqBody\n        })\n        .then(res=>res.json())\n        .then(\n          data=>{\n            //console.log(data);\n            if(data.insertstatus=== \"ok\"){\n              localStorage.removeItem('startedQuiz');\n              localStorage.removeItem('startedQuizAnswers');\n              this.setState({startedQuiz:null, startedQuizAnswers:null});\n              alert('Quiz Submitted');\n            }\n          }\n        );\n  }\n\n  reviseQuizMinsRemaining(){\n    if(this.state.startedQuiz!==null){\n          const start_timestamp=Date.parse(this.state.startedQuiz.start_time);\n          var startTime=new Date();\n          startTime.setTime(start_timestamp);\n          const current_timestamp=Date.now();\n\n          const MsRemaining=start_timestamp+\n                            parseInt(this.state.startedQuiz.duration_minutes)*60*1000-current_timestamp;\n          //var mins_remaining = Math.round(((MsRemaining % 86400000) % 3600000) / 60000); // minutes\n          var mins_remaining= Math.round(MsRemaining/60000);\n          if(mins_remaining>0){\n            console.log(startTime);\n            console.log(mins_remaining);\n            const copied = Object.assign({}, this.state.startedQuiz);\n            copied['mins_remaining']=mins_remaining;\n            this.setState({startedQuiz:copied});\n            localStorage.setItem('startedQuiz', JSON.stringify(copied));\n         }\n         else{\n           this.startedQuizSubmit();\n         }\n    }\n  }\n\n\n\n  isQuizStarted(quizId){\n    if(this.state.startedQuiz!==null&&this.state.startedQuiz.id===quizId)\n        return true;\n    else\n        return false;\n  }\n\n  loadProblems(){\n    this.setState({spinner:true});\n    fetch(`/api/getProblems`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n        this.setState({problemsArray: data, spinner: false});\n    })\n  }\n\n  setProblems(arr){\n    this.setState({problemsArray:arr});\n  }\n\n  loadQuizes(){\n    this.setState({spinner:true});\n    fetch(`/api/getQuizes`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      //console.log(data);\n      this.setState({ quizesArray: data, spinner: false});\n    })\n  }\n\n  setQuizes(arr){\n    this.setState({quizesArray:arr});\n  }\n\n  loadUsers(){\n    this.setState({spinner:true});\n    fetch(`/api/getUsers`, {\n      headers:{\n        'Accept':'application/json'\n      }\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      this.setState({usersArray: data, spinner:false});\n    })\n  }\n\n  setUsers(arr){\n    this.setState({usersArray:arr});\n  }\n\n  showSpinner(){\n    this.setState({spinner:true});\n  }\n\n  hideSpinner(){\n    this.setState({spinner:false});\n  }\n\n  handleLoginSubmit(event){\n    if(this.state.userId===null\n        ||this.state.password===null\n        ||this.state.password.length===0\n        ||this.state.userId.length===0)\n    {\n      event.preventDefault();\n      this.setState({errorMessage: \"UserId/password cannot be empty\"})\n      return;\n    }\n    var reqBody=\"userId=\"+encodeURIComponent(this.state.userId);\n        reqBody+='&password='+encodeURIComponent(this.state.password);\n\n        fetch(`/api/login`, {\n          headers:{\n            'Accept':'application/json',\n            'Content-type': 'application/x-www-form-urlencoded'\n          },\n          method: 'POST',\n          body: reqBody\n        })\n        .then(res=>res.json())\n        .then(\n          data=>{\n            console.log(data);\n            if(data.login===\"ok\"){\n              localStorage.setItem('loggedInUser', this.state.userId);\n              localStorage.setItem('admin', data.admin);\n              this.setState({errorMessage:null, loggedInUser: this.state.userId, admin: data.admin});\n            }\n            else{\n              this.setState({errorMessage: \"Login Failed: UserId/password Mismatch\"});\n            }\n          }\n        );\n    event.preventDefault();\n\n  }\n\n  userIdChange(e){\n    const newUserId=e.target.value;\n    this.setState({userId: newUserId});\n  }\n\n  passwordChange(e){\n    const newPassword=e.target.value;\n    this.setState({password: newPassword});\n  }\n\n  logoutUser(e){\n    //e.preventDefault();\n    let b=window.confirm('Are you sure you want to logout')\n    if(b===true){\n      if(this.state.startedQuiz!==null)\n         this.startedQuizSubmit();\n      localStorage.setItem('loggedInUser', '');\n      localStorage.setItem('admin', \"0\");\n      localStorage.removeItem('startedQuiz');\n      localStorage.removeItem('startedQuizAnswers');\n      this.setState({errorMessage:null, loggedInUser: '', admin:\"0\",\n                      startedQuiz:null, startedQuizAnswers:null});\n    }\n    else{\n      e.preventDefault();\n    }\n  }\n\n  setErrorMessage(errMsg){\n    this.setState({errorMessage:errMsg});\n  }\n\n\n    render(){\n      return (\n        <Router>\n          <div>\n            <Route path=\"/\" render={(props)=><Header\n                                                {...props}\n                                                userId={this.state.userId}\n                                                password={this.state.password}\n                                                errorMessage={this.state.errorMessage}\n                                                passwordChange={this.passwordChange}\n                                                userIdChange={this.userIdChange}\n                                                handleSubmit={this.handleLoginSubmit}\n                                                logoutUser={this.logoutUser}\n                                                loggedInUser={this.state.loggedInUser}\n                                                startedQuiz={this.state.startedQuiz}\n                                              />}\n            />\n            <Route path=\"/\" render={(props)=><DropdownMenuHover\n                                              {...props}\n                                               loggedInUser={this.state.loggedInUser}\n                                               setErrorMessage={this.setErrorMessage}\n                                              />\n                                    }\n             />\n             {\n               this.state.spinner===true?(<div id=\"spinner\" className=\"loadingContainer\"><div className=\"loading\"></div></div>):null\n             }\n            <Route exact path=\"/\" component={ImageSlider} />\n            <Route path=\"/problemsBrowse\" render={(props)=><ProblemsBrowse {...props}\n                                                            problemsArray={this.state.problemsArray}\n                                                            quizesArray={this.state.quizesArray}\n                                                            loadProblems={this.loadProblems}\n                                                            setProblems={this.setProblems}\n                                                            loadQuizes={this.loadQuizes}\n                                                            showSpinner={this.showSpinner}\n                                                            hideSpinner={this.hideSpinner}\n                                                            loggedInUser={this.state.loggedInUser}\n                                                            admin={this.state.admin}\n                                                            />\n                                                 }\n            />\n            <Route path=\"/problemInsert\" render={(props)=><ProblemInsert {...props}\n                                                           problemsArray={this.state.problemsArray}\n                                                           quizesArray={this.state.quizesArray}\n                                                           loadQuizes={this.loadQuizes}\n                                                           setProblems={this.setProblems}\n                                                           showSpinner={this.showSpinner}\n                                                           hideSpinner={this.hideSpinner}\n                                                           loggedInUser={this.state.loggedInUser}\n                                                          />\n                                                }\n            />\n            <Route path=\"/quizesBrowse\" render={(props)=><QuizesBrowse\n                                                          quizesArray={this.state.quizesArray}\n                                                          loadQuizes={this.loadQuizes}\n                                                        />\n                                               }\n             />\n            <Route path=\"/quizInsert\" render={(props)=><QuizInsert {...props}\n                                                        quizesArray={this.state.quizesArray}\n                                                        coursesArray={this.state.coursesArray}\n                                                        loadCourses={this.loadCourses}\n                                                        setQuizes={this.setQuizes}\n                                                        showSpinner={this.showSpinner}\n                                                        hideSpinner={this.hideSpinner}\n                                                        loggedInUser={this.state.loggedInUser}\n                                                       />\n                                             }\n            />\n            <Route path=\"/quizShowSelected/:id\" render={(props)=><QuizShowSelected {...props}\n                                                                  loadQuizes={this.loadQuizes}\n                                                                  quizesArray={this.state.quizesArray}\n                                                                  setQuizes={this.setQuizes}\n                                                                  loadCourses={this.loadCourses}\n                                                                  coursesArray={this.state.coursesArray}\n                                                                  showSpinner={this.showSpinner}\n                                                                  hideSpinner={this.hideSpinner}\n                                                                  loggedInUser={this.state.loggedInUser}\n                                                                  startQuiz={this.startQuiz}\n                                                                  admin={this.state.admin}\n                                                                  setErrorMessage={this.setErrorMessage}\n                                                                  isQuizStarted={this.isQuizStarted}\n                                                                  optionChange={this.startedQuizOptionChange}\n                                                                  submitQuiz={this.startedQuizSubmit}\n                                                                  startedQuizAnswers={this.state.startedQuizAnswers}\n                                                                 />\n                                                       }\n            />\n            <Route path=\"/usersBrowse\" render={(props)=><UsersBrowse {...props}\n                                                          usersArray={this.state.usersArray}\n                                                          loadUsers={this.loadUsers}\n                                                        />\n                                              }\n            />\n            <Route path=\"/userInsert\" render={(props)=><UserInsert {...props}\n                                                        usersArray={this.state.usersArray}\n                                                        setUsers={this.setUsers}\n                                                        showSpinner={this.showSpinner}\n                                                        hideSpinner={this.hideSpinner}\n                                                       />\n                                             }\n            />\n            <Route path=\"/UserShowSelected/:id\" render={(props)=><UserShowSelected {...props}\n                                                                  loadUsers={this.loadUsers}\n                                                                  usersArray={this.state.usersArray}\n                                                                  setUsers={this.setUsers}\n                                                                  showSpinner={this.showSpinner}\n                                                                  hideSpinner={this.hideSpinner}\n                                                                  loggedInUser={this.state.loggedInUser}\n                                                                  admin={this.state.admin}\n                                                                  setErrorMessage={this.setErrorMessage}\n                                                                 />\n                                                       }\n            />\n            <Route path=\"/coursesBrowse\" render={(props)=><CoursesBrowse\n                                                           coursesArray={this.state.coursesArray}\n                                                           loadCourses={this.loadCourses}\n                                                          />\n                                                }\n            />\n            <Route path=\"/courseInsert\" render={(props)=><CourseInsert {...props}\n                                                          coursesArray={this.state.coursesArray}\n                                                          setCourses={this.setCourses}\n                                                          showSpinner={this.showSpinner}\n                                                          hideSpinner={this.hideSpinner}\n                                                          loggedInUser={this.state.loggedInUser}\n                                                          />\n                                               }\n            />\n            <Route path=\"/CourseShowSelected/:id\" render={(props)=><CourseShowSelected {...props}\n                                                                    loadCourses={this.loadCourses}\n                                                                    coursesArray={this.state.coursesArray}\n                                                                    setCourses={this.setCourses}\n                                                                    showSpinner={this.showSpinner}\n                                                                    hideSpinner={this.hideSpinner}\n                                                                    loggedInUser={this.state.loggedInUser}\n                                                                    admin={this.state.admin}\n                                                                    setErrorMessage={this.setErrorMessage}\n                                                                  />\n                                                          }\n            />\n            {\n            this.state.loggedInUser===\"\" && <Route path=\"/errorLogin\" render={(props)=>(<div\n                                                           style={{color:\"red\", fontSize: \"1.5em\",\n                                                             paddingTop:\"1%\",\n                                                            textAlign:\"center\"}}>\n                                                            Error: User not Logged In!\n                                                       </div>\n                                                       )\n                                              }\n           />\n           }\n\n          </div>\n        </Router>\n      )\n    }\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}