{"ast":null,"code":"/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : false;\n/**\r\n * Check if Blob constructor is supported\r\n */\n\nvar blobSupported = function () {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch (e) {\n    return false;\n  }\n}();\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\n\n\nvar blobSupportsArrayBufferView = blobSupported && function () {\n  try {\n    var b = new Blob([new Uint8Array([1, 2])]);\n    return b.size === 2;\n  } catch (e) {\n    return false;\n  }\n}();\n/**\r\n * Check if BlobBuilder is supported\r\n */\n\n\nvar blobBuilderSupported = BlobBuilder && BlobBuilder.prototype.append && BlobBuilder.prototype.getBlob;\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\n\nfunction mapArrayBufferViews(ary) {\n  return ary.map(function (chunk) {\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer; // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      return buf;\n    }\n\n    return chunk;\n  });\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary).forEach(function (part) {\n    bb.append(part);\n  });\n  return options.type ? bb.getBlob(options.type) : bb.getBlob();\n}\n\n;\n\nfunction BlobConstructor(ary, options) {\n  return new Blob(mapArrayBufferViews(ary), options || {});\n}\n\n;\n\nif (typeof Blob !== 'undefined') {\n  BlobBuilderConstructor.prototype = Blob.prototype;\n  BlobConstructor.prototype = Blob.prototype;\n}\n\nmodule.exports = function () {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n}();","map":{"version":3,"sources":["/home/mathew/javascript/ischools/node_modules/blob/index.js"],"names":["BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","a","Blob","size","e","blobSupportsArrayBufferView","b","Uint8Array","blobBuilderSupported","prototype","append","getBlob","mapArrayBufferViews","ary","map","chunk","buffer","ArrayBuffer","buf","byteLength","copy","set","byteOffset","BlobBuilderConstructor","options","bb","forEach","part","type","BlobConstructor","module","exports","undefined"],"mappings":"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","sourcesContent":["/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n"]},"metadata":{},"sourceType":"script"}