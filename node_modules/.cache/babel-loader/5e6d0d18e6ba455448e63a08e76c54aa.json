{"ast":null,"code":"import _toConsumableArray from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect}from'react-router-dom';var CourseInsert=/*#__PURE__*/function(_React$Component){_inherits(CourseInsert,_React$Component);var _super=_createSuper(CourseInsert);function CourseInsert(props){var _this;_classCallCheck(this,CourseInsert);_this=_super.call(this,props);_this.state={description:'',name:''};_this.baseState=_this.state;_this.descriptionChange=_this.descriptionChange.bind(_assertThisInitialized(_this));_this.nameChange=_this.nameChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(CourseInsert,[{key:\"handleSubmit\",value:function handleSubmit(){var _this2=this;if(this.state.name===''||this.state.description===''){alert('Name/Description cannot be empty');return;}else{this.props.showSpinner();var reqBody='courseName='+encodeURIComponent(this.state.name);reqBody+='&courseDescription='+encodeURIComponent(this.state.description);reqBody+='&ownerId='+encodeURIComponent(this.props.loggedInUser);fetch(\"/api/insertCourseAction\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){//if(data.updatestatus==\"ok\")\nvar coursesArrayCopy=_toConsumableArray(_this2.props.coursesArray);var obj={id:data.courseId,name:_this2.state.name,description:_this2.state.description,author_id:_this2.props.loggedInUser};coursesArrayCopy.push(obj);_this2.props.setCourses(coursesArrayCopy);_this2.setState(_this2.baseState);_this2.props.hideSpinner();alert('Course inserted');window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/coursesBrowse\");});}}},{key:\"descriptionChange\",value:function descriptionChange(e){var new_description=e.target.value;//console.log(e.target.value);\nthis.setState({description:new_description});}},{key:\"nameChange\",value:function nameChange(e){var new_name=e.target.value;//console.log(e.target.value);\nthis.setState({name:new_name});}},{key:\"render\",value:function render(){if(this.props.loggedInUser===''){return/*#__PURE__*/React.createElement(Redirect,{to:\"/errorLogin\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{class:\"HomeLink\",href:\"/\"},\"back to home\"),/*#__PURE__*/React.createElement(\"div\",{class:\"h1\"},\"Insert Course\"),/*#__PURE__*/React.createElement(\"fieldset\",null,\"Course Name:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"courseName\",name:\"courseName\",type:\"text\",onChange:this.nameChange,value:this.state.name}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Course Description:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{id:\"courseDescription\",name:\"courseDescription\",type:\"text\",value:this.state.description,onChange:this.descriptionChange,rows:\"10\",style:{width:'90%'}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Owner:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"ownerId\",name:\"ownerId\",type:\"text\",required:\"true\",style:{width:'100px',textAlign:'center'},value:this.props.loggedInUser,readonly:true}),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"Insert Course\",onClick:this.handleSubmit})));}}]);return CourseInsert;}(React.Component);export default CourseInsert;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/CourseInsert.js"],"names":["React","Redirect","CourseInsert","props","state","description","name","baseState","descriptionChange","bind","nameChange","handleSubmit","alert","showSpinner","reqBody","encodeURIComponent","loggedInUser","fetch","headers","method","body","then","res","json","data","coursesArrayCopy","coursesArray","obj","id","courseId","author_id","push","setCourses","setState","hideSpinner","window","location","assign","hostname","port","e","new_description","target","value","new_name","width","textAlign","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {  Redirect } from 'react-router-dom';\n\nclass CourseInsert extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state={\n      description:'',\n      name:''\n    }\n    this.baseState=this.state;\n    this.descriptionChange=this.descriptionChange.bind(this);\n    this.nameChange=this.nameChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(){\n    if(this.state.name===''||this.state.description===''){\n      alert('Name/Description cannot be empty');\n      return;\n    }\n    else{\n      this.props.showSpinner();\n      var reqBody='courseName='+encodeURIComponent(this.state.name);\n      reqBody+='&courseDescription='+encodeURIComponent(this.state.description);\n      reqBody+='&ownerId='+encodeURIComponent(this.props.loggedInUser);\n\n      fetch(`/api/insertCourseAction`, {\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data=>{\n          //if(data.updatestatus==\"ok\")\n              let coursesArrayCopy=[...this.props.coursesArray];\n              let obj={\n                id: data.courseId,\n                name:this.state.name,\n                description: this.state.description,\n                author_id:this.props.loggedInUser\n              };\n              coursesArrayCopy.push(obj);\n              this.props.setCourses(coursesArrayCopy);\n              this.setState(this.baseState);\n              this.props.hideSpinner();\n              alert('Course inserted');\n              window.location.assign(\"http://\"+window.location.hostname+':'+window.location.port+\"/coursesBrowse\");\n      })\n\n    }\n\n  }\n\n  descriptionChange(e){\n    const new_description=e.target.value;\n    //console.log(e.target.value);\n    this.setState({description:new_description});\n  }\n\n  nameChange(e){\n    const new_name=e.target.value;\n    //console.log(e.target.value);\n    this.setState({name:new_name});\n  }\n\n  render(){\n    if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n    return (\n      <div>\n      <a class=\"HomeLink\" href=\"/\">back to home</a>\n      <div class=\"h1\">\n        Insert Course\n      </div>\n        <fieldset>\n            Course Name:<br/>\n            <input id=\"courseName\" name=\"courseName\" type=\"text\"\n            onChange={this.nameChange}\n            value={this.state.name}\n            >\n            </input>\n            <br/>\n            <br/>\n            Course Description:<br/>\n            <textarea id=\"courseDescription\" name=\"courseDescription\" type=\"text\"\n             value={this.state.description}\n              onChange={this.descriptionChange}\n             rows=\"10\" style={{width:'90%'}}>\n            </textarea>\n            <br/>\n            <br/>\n            Owner:<br/>\n            <input id=\"ownerId\" name=\"ownerId\" type=\"text\" required=\"true\"\n            style={{width:'100px', textAlign: 'center'}}\n            value={this.props.loggedInUser} readonly>\n            </input> <br/>\n            <br/>\n            <input type=\"button\" value=\"Insert Course\" onClick={this.handleSubmit}/>\n        </fieldset>\n      </div>\n    )\n  }\n\n}\n\nexport default CourseInsert;\n"]},"metadata":{},"sourceType":"module"}