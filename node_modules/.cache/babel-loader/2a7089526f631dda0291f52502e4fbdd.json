{"ast":null,"code":"import _classCallCheck from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mathew/javascript/ischools-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import UserEditDialog from'./UserEditDialog';import{Redirect}from'react-router-dom';var UserShowSelected=/*#__PURE__*/function(_React$Component){_inherits(UserShowSelected,_React$Component);var _super=_createSuper(UserShowSelected);function UserShowSelected(props){var _this;_classCallCheck(this,UserShowSelected);_this=_super.call(this,props);_this.state={showEditUserDialog:false,userObj:{},coursesArray:[],userObjForEdit:{}};_this.handleEditUserDialogDismiss=_this.handleEditUserDialogDismiss.bind(_assertThisInitialized(_this));_this.editUserHandler=_this.editUserHandler.bind(_assertThisInitialized(_this));_this.saveUpdateHandler=_this.saveUpdateHandler.bind(_assertThisInitialized(_this));_this.firstNameChange=_this.firstNameChange.bind(_assertThisInitialized(_this));_this.lastNameChange=_this.lastNameChange.bind(_assertThisInitialized(_this));_this.address1Change=_this.address1Change.bind(_assertThisInitialized(_this));_this.address2Change=_this.address2Change.bind(_assertThisInitialized(_this));_this.cityChange=_this.cityChange.bind(_assertThisInitialized(_this));_this.zipChange=_this.zipChange.bind(_assertThisInitialized(_this));_this.phoneChange=_this.phoneChange.bind(_assertThisInitialized(_this));_this.mobileChange=_this.mobileChange.bind(_assertThisInitialized(_this));_this.emailChange=_this.emailChange.bind(_assertThisInitialized(_this));return _this;}_createClass(UserShowSelected,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({spinner:true});var params=this.props.match.params;var reqBody=\"userId=\"+encodeURIComponent(params.id);console.log(params.id);fetch(\"/api/getTheUser\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){data.id=params.id;fetch(\"/api/getCourseListForUser\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data1){//console.log(data1);\n_this2.setState({spinner:false,userObj:data,userObjForEdit:data,coursesArray:data1});});});}},{key:\"firstNameChange\",value:function firstNameChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.firstName=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"lastNameChange\",value:function lastNameChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.lastName=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"address1Change\",value:function address1Change(e){var copied=Object.assign({},this.state.userObjForEdit);copied.address1=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"address2Change\",value:function address2Change(e){var copied=Object.assign({},this.state.userObjForEdit);copied.address2=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"cityChange\",value:function cityChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.city=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"zipChange\",value:function zipChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.zip=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"phoneChange\",value:function phoneChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.phone=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"mobileChange\",value:function mobileChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.mobile=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"emailChange\",value:function emailChange(e){var copied=Object.assign({},this.state.userObjForEdit);copied.email=e.target.value;this.setState({userObjForEdit:copied});}},{key:\"handleEditUserDialogDismiss\",value:function handleEditUserDialogDismiss(){this.setState({userObjForEdit:this.state.userObj,showEditUserDialog:false});}},{key:\"editUserHandler\",value:function editUserHandler(){this.setState({showEditUserDialog:true});}},{key:\"saveUpdateHandler\",value:function saveUpdateHandler(){var _this3=this;this.props.showSpinner();//console.log(newCourseObj);\nvar reqBody=\"id=\"+encodeURIComponent(this.state.userObjForEdit.id);reqBody+='&firstName='+encodeURIComponent(this.state.userObjForEdit.firstName);reqBody+='&lastName='+encodeURIComponent(this.state.userObjForEdit.lastName);reqBody+='&address1='+encodeURIComponent(this.state.userObjForEdit.address1);reqBody+='&address2='+encodeURIComponent(this.state.userObjForEdit.address2);reqBody+='&city='+encodeURIComponent(this.state.userObjForEdit.city);reqBody+='&zip='+encodeURIComponent(this.state.userObjForEdit.zip);reqBody+='&phone='+encodeURIComponent(this.state.userObjForEdit.phone);reqBody+='&mobile='+encodeURIComponent(this.state.userObjForEdit.mobile);reqBody+='&email='+encodeURIComponent(this.state.userObjForEdit.email);fetch(\"/api/updateUser\",{headers:{'Accept':'application/json','Content-type':'application/x-www-form-urlencoded'},method:'POST',body:reqBody}).then(function(res){return res.json();}).then(function(data){if(data.updatestatus===\"ok\"){_this3.props.loadUsers();var usersArrayCopy=JSON.parse(JSON.stringify(_this3.props.usersArray));usersArrayCopy.forEach(function(obj){if(obj.id===_this3.state.userObjForEdit.id){obj.firstName=_this3.state.userObjForEdit.firstName;obj.lastName=_this3.state.userObjForEdit.lastName;obj.address1=_this3.state.userObjForEdit.address1;obj.address2=_this3.state.userObjForEdit.address2;obj.city=_this3.state.userObjForEdit.city;obj.zip=_this3.state.userObjForEdit.zip;obj.mobile=_this3.state.userObjForEdit.mobile;obj.phone=_this3.state.userObjForEdit.phone;obj.email=_this3.state.userObjForEdit.email;}});_this3.props.setUsers(usersArrayCopy);_this3.setState({userObj:_this3.state.userObjForEdit,showEditUserDialog:false});_this3.props.hideSpinner();alert('User updated');}});}},{key:\"render\",value:function render(){var _this4=this;if(this.props.loggedInUser===''){return/*#__PURE__*/React.createElement(Redirect,{to:\"/errorLogin\"});}console.log(this.props.admin);return/*#__PURE__*/React.createElement(\"div\",{className:\"Panel\"},/*#__PURE__*/React.createElement(\"a\",{className:\"HomeLink\",href:\"/\"},\"back to home\"),/*#__PURE__*/React.createElement(\"div\",{class:\"h1\"},this.state.userObj.firstName,\" \",this.state.userObj.lastName),this.props.loggedInUser===this.state.userObj.id||this.props.admin===\"1\"?/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"EditButton\",onClick:function onClick(){return _this4.editUserHandler();},id:\"e\".concat(this.state.userObj.id),value:\"Edit User\"}):null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"Address:\"),\" \",this.state.userObj.address1,\" \",this.state.userObj.address2,\"  \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"  \",/*#__PURE__*/React.createElement(\"b\",null,\"City:\"),\" \",this.state.userObj.city),/*#__PURE__*/React.createElement(\"p\",null,\"  \",/*#__PURE__*/React.createElement(\"b\",null,\"Zip:\"),\" \",this.state.userObj.zip),/*#__PURE__*/React.createElement(\"b\",null,\"Phone:\"),\" \",this.state.userObj.phone,\"  \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"Mobile:\"),\" \",this.state.userObj.mobile,\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"Email:\"),\" \",this.state.userObj.email,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,\"List of Courses:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),this.state.coursesArray.map(function(obj){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"http://\".concat(window.location.hostname,\":\").concat(window.location.port,\"/courseShowSelected/\").concat(obj.id)},obj.name),/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(UserEditDialog,{objectForEdit:this.state.userObjForEdit,show:this.state.showEditUserDialog,handleDismiss:this.handleEditUserDialogDismiss,handleSubmit:this.saveUpdateHandler,firstNameChange:this.firstNameChange,lastNameChange:this.lastNameChange,address1Change:this.address1Change,address2Change:this.address2Change,cityChange:this.cityChange,zipChange:this.zipChange,phoneChange:this.phoneChange,mobileChange:this.mobileChange,emailChange:this.emailChange}));}}]);return UserShowSelected;}(React.Component);export default UserShowSelected;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/UserShowSelected.js"],"names":["React","UserEditDialog","Redirect","UserShowSelected","props","state","showEditUserDialog","userObj","coursesArray","userObjForEdit","handleEditUserDialogDismiss","bind","editUserHandler","saveUpdateHandler","firstNameChange","lastNameChange","address1Change","address2Change","cityChange","zipChange","phoneChange","mobileChange","emailChange","setState","spinner","params","match","reqBody","encodeURIComponent","id","console","log","fetch","headers","method","body","then","res","json","data","data1","e","copied","Object","assign","firstName","target","value","lastName","address1","address2","city","zip","phone","mobile","email","showSpinner","updatestatus","loadUsers","usersArrayCopy","JSON","parse","stringify","usersArray","forEach","obj","setUsers","hideSpinner","alert","loggedInUser","admin","map","window","location","hostname","port","name","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport UserEditDialog from './UserEditDialog';\nimport {  Redirect } from 'react-router-dom';\n\nclass UserShowSelected extends React.Component{\n  constructor(props){\n    super(props);\n    this.state={\n      showEditUserDialog:false,\n      userObj:{},\n      coursesArray:[],\n      userObjForEdit:{}\n    }\n    this.handleEditUserDialogDismiss=this.handleEditUserDialogDismiss.bind(this);\n    this.editUserHandler=this.editUserHandler.bind(this);\n    this.saveUpdateHandler=this.saveUpdateHandler.bind(this);\n    this.firstNameChange=this.firstNameChange.bind(this);\n    this.lastNameChange=this.lastNameChange.bind(this);\n    this.address1Change=this.address1Change.bind(this);\n    this.address2Change=this.address2Change.bind(this);\n    this.cityChange=this.cityChange.bind(this);\n    this.zipChange=this.zipChange.bind(this);\n    this.phoneChange=this.phoneChange.bind(this);\n    this.mobileChange=this.mobileChange.bind(this);\n    this.emailChange=this.emailChange.bind(this);\n  }\n\n  componentDidMount(){\n    this.setState({spinner:true});\n    const {params}= this.props.match;\n\n    var reqBody=\"userId=\"+encodeURIComponent(params.id);\n    console.log(params.id);\n    fetch(`/api/getTheUser`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n      data.id=params.id;\n      fetch(`/api/getCourseListForUser`,{\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data1=>{\n          //console.log(data1);\n          this.setState({spinner:false, userObj: data, userObjForEdit: data, coursesArray: data1});\n      })\n    })\n  }\n\n  firstNameChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.firstName=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  lastNameChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.lastName=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  address1Change(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.address1=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  address2Change(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.address2=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  cityChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.city=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  zipChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.zip=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  phoneChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.phone=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  mobileChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.mobile=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n  emailChange(e){\n    const copied = Object.assign({}, this.state.userObjForEdit)\n    copied.email=e.target.value;\n    this.setState({userObjForEdit:copied});\n  }\n\n  handleEditUserDialogDismiss(){\n    this.setState({userObjForEdit: this.state.userObj, showEditUserDialog:false});\n  }\n\n  editUserHandler(){\n    this.setState({showEditUserDialog:true});\n  }\n\n  saveUpdateHandler(){\n    this.props.showSpinner();\n    //console.log(newCourseObj);\n    var reqBody=\"id=\"+encodeURIComponent(this.state.userObjForEdit.id);\n    reqBody+='&firstName='+encodeURIComponent(this.state.userObjForEdit.firstName);\n    reqBody+='&lastName='+encodeURIComponent(this.state.userObjForEdit.lastName);\n    reqBody+='&address1='+encodeURIComponent(this.state.userObjForEdit.address1);\n    reqBody+='&address2='+encodeURIComponent(this.state.userObjForEdit.address2);\n    reqBody+='&city='+encodeURIComponent(this.state.userObjForEdit.city);\n    reqBody+='&zip='+encodeURIComponent(this.state.userObjForEdit.zip);\n    reqBody+='&phone='+encodeURIComponent(this.state.userObjForEdit.phone);\n    reqBody+='&mobile='+encodeURIComponent(this.state.userObjForEdit.mobile);\n    reqBody+='&email='+encodeURIComponent(this.state.userObjForEdit.email);\n\n    fetch(`/api/updateUser`, {\n      headers:{\n        'Accept':'application/json',\n        'Content-type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: reqBody\n    })\n    .then(res=>res.json())\n    .then(data=>{\n        if(data.updatestatus===\"ok\"){\n            this.props.loadUsers();\n            let usersArrayCopy=JSON.parse(JSON.stringify(this.props.usersArray));\n            usersArrayCopy.forEach((obj)=>{\n              if(obj.id===this.state.userObjForEdit.id){\n                 obj.firstName=this.state.userObjForEdit.firstName;\n                 obj.lastName=this.state.userObjForEdit.lastName;\n                 obj.address1=this.state.userObjForEdit.address1;\n                 obj.address2=this.state.userObjForEdit.address2;\n                 obj.city=this.state.userObjForEdit.city;\n                 obj.zip=this.state.userObjForEdit.zip;\n                 obj.mobile=this.state.userObjForEdit.mobile;\n                 obj.phone=this.state.userObjForEdit.phone;\n                 obj.email=this.state.userObjForEdit.email;\n              }\n            });\n            this.props.setUsers(usersArrayCopy);\n            this.setState({userObj: this.state.userObjForEdit, showEditUserDialog:false});\n            this.props.hideSpinner();\n            alert('User updated');\n        }\n    })\n  }\n\n  render(){\n    if(this.props.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n    console.log(this.props.admin);\n\n    return (\n      <div className=\"Panel\">\n          {/*\n            this.state.spinner===true?(<div id=\"spinner\" className=\"container\"><div className=\"loading\"></div></div>):null\n          */}\n          <a className=\"HomeLink\" href=\"/\">back to home</a>\n          <div class=\"h1\">\n            {this.state.userObj.firstName} {this.state.userObj.lastName}\n          </div>\n          {(this.props.loggedInUser===this.state.userObj.id||this.props.admin===\"1\")?\n            (<input type=\"button\" className=\"EditButton\"\n            onClick={()=>this.editUserHandler()}\n            id={`e${this.state.userObj.id}`} value=\"Edit User\"/>):null\n          }\n          <br/><br/>\n          <b>Address:</b> {this.state.userObj.address1} {this.state.userObj.address2}  <br/>\n          <p>  <b>City:</b> {this.state.userObj.city}</p>\n          <p>  <b>Zip:</b> {this.state.userObj.zip}</p>\n          <b>Phone:</b> {this.state.userObj.phone}  <br/><br/>\n          <b>Mobile:</b> {this.state.userObj.mobile} <br/><br/>\n          <b>Email:</b> {this.state.userObj.email}\n          <div className=\"row\">\n            <div>\n              <br/>\n              <b>List of Courses:</b>\n              <br/><br/>\n              {\n                this.state.coursesArray.map(obj=>(\n                   <div>\n                      <a href={`http://${window.location.hostname}:${window.location.port}/courseShowSelected/${obj.id}`}>{obj.name}</a><br/>\n                   </div>\n                  )\n                )\n              }\n            </div>\n          </div>\n          <UserEditDialog\n                  objectForEdit={this.state.userObjForEdit}\n                  show={this.state.showEditUserDialog}\n                  handleDismiss={this.handleEditUserDialogDismiss}\n                  handleSubmit={this.saveUpdateHandler}\n                  firstNameChange={this.firstNameChange}\n                  lastNameChange={this.lastNameChange}\n                  address1Change={this.address1Change}\n                  address2Change={this.address2Change}\n                  cityChange={this.cityChange}\n                  zipChange={this.zipChange}\n                  phoneChange={this.phoneChange}\n                  mobileChange={this.mobileChange}\n                  emailChange={this.emailChange}\n          />\n     </div>\n    )\n  }\n\n\n}\n\nexport default UserShowSelected;\n"]},"metadata":{},"sourceType":"module"}