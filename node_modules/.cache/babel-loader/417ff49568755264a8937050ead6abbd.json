{"ast":null,"code":"import React from 'react';\n\nclass PeerConnectionExt extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOnTrack = async trackEvent => {\n      let {\n        remoteStream\n      } = this.props;\n      console.log('in onTrack');\n      console.log(trackEvent); //const remoteStream = new MediaStream([ trackEvent.track ]);\n\n      await remoteStream.addTrack(trackEvent.track); //this.props.setRemoteStream(remoteStream);\n    };\n\n    this.handleOnNegotiationNeeded = async negotiationNeededEvent => {\n      console.log('In negotitation needed');\n      console.log(negotiationNeededEvent);\n      if (this.props.organiserId !== this.props.loggedInUser) this.props.callUser(this.props.userId).then();\n    };\n  }\n\n  componentDidMount() {\n    const {\n      peerConnection\n    } = this.props;\n    peerConnection.onnegotiationneeded = this.handleOnNegotiationNeeded;\n    peerConnection.onicecandidate = this.props.handleOnIceEvent;\n    peerConnection.ontrack = this.handleOnTrack;\n    console.log('PeerConnectionExt component mounted');\n    console.log(peerConnection);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n}\n\nexport default PeerConnectionExt;","map":{"version":3,"sources":["/home/mathew/javascript/ischools-react/client/src/components/chat/PeerConnectionExt.js"],"names":["React","PeerConnectionExt","Component","constructor","props","handleOnTrack","trackEvent","remoteStream","console","log","addTrack","track","handleOnNegotiationNeeded","negotiationNeededEvent","organiserId","loggedInUser","callUser","userId","then","componentDidMount","peerConnection","onnegotiationneeded","onicecandidate","handleOnIceEvent","ontrack","render"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,iBAAN,SAAgCD,KAAK,CAACE,SAAtC,CAA+C;AAC7CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAInBC,aAJmB,GAIH,MAAMC,UAAN,IAAqB;AACnC,UAAI;AAACC,QAAAA;AAAD,UAAe,KAAKH,KAAxB;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ,EAHmC,CAInC;;AACA,YAAMC,YAAY,CAACG,QAAb,CAAsBJ,UAAU,CAACK,KAAjC,CAAN,CALmC,CAMnC;AACD,KAXkB;;AAAA,SAoBlBC,yBApBkB,GAoBU,MAAOC,sBAAP,IAAkC;AAC5DL,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYI,sBAAZ;AACA,UAAG,KAAKT,KAAL,CAAWU,WAAX,KAAyB,KAAKV,KAAL,CAAWW,YAAvC,EACG,KAAKX,KAAL,CAAWY,QAAX,CAAoB,KAAKZ,KAAL,CAAWa,MAA/B,EAAuCC,IAAvC;AACJ,KAzBiB;AAElB;;AA2BCC,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEC,MAAAA;AAAF,QAAqB,KAAKhB,KAAhC;AACAgB,IAAAA,cAAc,CAACC,mBAAf,GAAqC,KAAKT,yBAA1C;AACAQ,IAAAA,cAAc,CAACE,cAAf,GAAgC,KAAKlB,KAAL,CAAWmB,gBAA3C;AACAH,IAAAA,cAAc,CAACI,OAAf,GAAyB,KAAKnB,aAA9B;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYW,cAAZ;AACH;;AAEDK,EAAAA,MAAM,GAAG;AACL,wBACE,yCADF;AAIH;;AA5C0C;;AA+C/C,eAAexB,iBAAf","sourcesContent":["import React from 'react';\n\nclass PeerConnectionExt extends React.Component{\n  constructor(props) {\n    super(props);\n  }\n\n  handleOnTrack = async(trackEvent) => {\n    let {remoteStream}=this.props;\n    console.log('in onTrack');\n    console.log(trackEvent);\n    //const remoteStream = new MediaStream([ trackEvent.track ]);\n    await remoteStream.addTrack(trackEvent.track);\n    //this.props.setRemoteStream(remoteStream);\n  }\n\n  /*handleOnTrack1=(trackEvent) => {\n      console.log('in onTrack');\n      console.log(trackEvent);\n      const stream=trackEvent.streams[0];\n      this.props.setRemoteStream(stream);\n  };*/\n\n   handleOnNegotiationNeeded = async (negotiationNeededEvent) => {\n     console.log('In negotitation needed');\n     console.log(negotiationNeededEvent);\n     if(this.props.organiserId!==this.props.loggedInUser)\n        this.props.callUser(this.props.userId).then();\n   }\n\n\n\n    componentDidMount() {\n        const { peerConnection } = this.props;\n        peerConnection.onnegotiationneeded = this.handleOnNegotiationNeeded;\n        peerConnection.onicecandidate = this.props.handleOnIceEvent;\n        peerConnection.ontrack = this.handleOnTrack;\n        console.log('PeerConnectionExt component mounted');\n        console.log(peerConnection);\n    }\n\n    render() {\n        return(\n          <>\n          </>\n        );\n    }\n}\n\nexport default PeerConnectionExt;\n"]},"metadata":{},"sourceType":"module"}