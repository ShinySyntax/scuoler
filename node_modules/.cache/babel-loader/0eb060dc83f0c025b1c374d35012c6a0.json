{"ast":null,"code":"var _jsxFileName = \"/home/mathew/javascript/ischools/src/components/CourseInsert.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport data from './data';\nimport { showSpinner, hideSpinner, setCourses } from '../stores/appStoreActions';\n\nclass CourseInsert extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      description: '',\n      name: '',\n      icons: data.icons\n    };\n    this.baseState = this.state;\n    this.descriptionChange = this.descriptionChange.bind(this);\n    this.nameChange = this.nameChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit() {\n    let globalState = this.props.state;\n    let dispatch = this.props.dispatch;\n\n    if (this.state.name === '' || this.state.description === '') {\n      alert('Name/Description cannot be empty');\n      return;\n    } else {\n      showSpinner(dispatch);\n      var reqBody = 'courseName=' + encodeURIComponent(this.state.name);\n      reqBody += '&courseDescription=' + encodeURIComponent(this.state.description);\n      reqBody += '&ownerId=' + encodeURIComponent(globalState.loggedInUser);\n      fetch(`/api/insertCourseAction`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      }).then(res => res.json()).then(data => {\n        //if(data.updatestatus==\"ok\")\n        let coursesArrayCopy = [...globalState.coursesArray];\n        let obj = {\n          id: data.courseId,\n          name: this.state.name,\n          description: this.state.description,\n          author_id: globalState.loggedInUser\n        };\n        coursesArrayCopy.push(obj);\n        setCourses(coursesArrayCopy, dispatch);\n        this.setState(this.baseState);\n        hideSpinner(dispatch);\n        alert('Course inserted');\n        window.location.assign(\"https://\" + window.location.hostname + ':' + window.location.port + \"/coursesBrowse\");\n      });\n    }\n  }\n\n  descriptionChange(e) {\n    const new_description = e.target.value; //console.log(e.target.value);\n\n    this.setState({\n      description: new_description\n    });\n  }\n\n  nameChange(e) {\n    const new_name = e.target.value; //console.log(e.target.value);\n\n    this.setState({\n      name: new_name\n    });\n  }\n\n  render() {\n    let globalState = this.props.state;\n\n    if (globalState.loggedInUser === '') {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/errorLogin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"HomeLink\",\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"homeIcon\",\n      src: this.state.icons.home,\n      alt: \"back to home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, \"Insert Course\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, \"Course Name:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"courseName\",\n      name: \"courseName\",\n      type: \"text\",\n      onChange: this.nameChange,\n      value: this.state.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }), \"Course Description:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 32\n      }\n    }), /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"courseDescription\",\n      name: \"courseDescription\",\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.descriptionChange,\n      rows: \"10\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }), \"Owner:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"ownerId\",\n      name: \"ownerId\",\n      type: \"text\",\n      required: \"true\",\n      style: {\n        width: '100px',\n        textAlign: 'center'\n      },\n      value: globalState.loggedInUser,\n      readonly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"Insert Course\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nexport default CourseInsert;","map":{"version":3,"sources":["/home/mathew/javascript/ischools/src/components/CourseInsert.js"],"names":["React","Redirect","data","showSpinner","hideSpinner","setCourses","CourseInsert","Component","constructor","props","state","description","name","icons","baseState","descriptionChange","bind","nameChange","handleSubmit","globalState","dispatch","alert","reqBody","encodeURIComponent","loggedInUser","fetch","headers","method","body","then","res","json","coursesArrayCopy","coursesArray","obj","id","courseId","author_id","push","setState","window","location","assign","hostname","port","e","new_description","target","value","new_name","render","home","width","textAlign"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {  Redirect } from 'react-router-dom';\nimport data from './data';\nimport {showSpinner, hideSpinner, setCourses} from '../stores/appStoreActions';\n\nclass CourseInsert extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state={\n      description:'',\n      name:'',\n      icons: data.icons\n    }\n    this.baseState=this.state;\n    this.descriptionChange=this.descriptionChange.bind(this);\n    this.nameChange=this.nameChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(){\n    let globalState=this.props.state;\n    let dispatch=this.props.dispatch;\n\n    if(this.state.name===''||this.state.description===''){\n      alert('Name/Description cannot be empty');\n      return;\n    }\n    else{\n      showSpinner(dispatch);\n      var reqBody='courseName='+encodeURIComponent(this.state.name);\n      reqBody+='&courseDescription='+encodeURIComponent(this.state.description);\n      reqBody+='&ownerId='+encodeURIComponent(globalState.loggedInUser);\n\n      fetch(`/api/insertCourseAction`, {\n        headers:{\n          'Accept':'application/json',\n          'Content-type': 'application/x-www-form-urlencoded'\n        },\n        method: 'POST',\n        body: reqBody\n      })\n      .then(res=>res.json())\n      .then(data=>{\n          //if(data.updatestatus==\"ok\")\n              let coursesArrayCopy=[...globalState.coursesArray];\n              let obj={\n                id: data.courseId,\n                name:this.state.name,\n                description: this.state.description,\n                author_id:globalState.loggedInUser\n              };\n              coursesArrayCopy.push(obj);\n              setCourses(coursesArrayCopy, dispatch);\n              this.setState(this.baseState);\n              hideSpinner(dispatch);\n              alert('Course inserted');\n              window.location.assign(\"https://\"+window.location.hostname+':'+window.location.port+\"/coursesBrowse\");\n      })\n\n    }\n\n  }\n\n  descriptionChange(e){\n    const new_description=e.target.value;\n    //console.log(e.target.value);\n    this.setState({description:new_description});\n  }\n\n  nameChange(e){\n    const new_name=e.target.value;\n    //console.log(e.target.value);\n    this.setState({name:new_name});\n  }\n\n  render(){\n    let globalState=this.props.state;\n    if(globalState.loggedInUser===''){\n      return <Redirect to=\"/errorLogin\"/>\n    }\n    return (\n      <div>\n      <a class=\"HomeLink\" href=\"/\">\n          <img class=\"homeIcon\" src={this.state.icons.home} alt=\"back to home\"/>\n      {/*back to home*/}\n      </a>\n      <div class=\"h1\">\n        Insert Course\n      </div>\n      <br/>\n        <fieldset>\n            Course Name:<br/>\n            <input id=\"courseName\" name=\"courseName\" type=\"text\"\n            onChange={this.nameChange}\n            value={this.state.name}\n            >\n            </input>\n            <br/>\n            <br/>\n            Course Description:<br/>\n            <textarea id=\"courseDescription\" name=\"courseDescription\" type=\"text\"\n             value={this.state.description}\n              onChange={this.descriptionChange}\n             rows=\"10\" style={{width:'90%'}}>\n            </textarea>\n            <br/>\n            <br/>\n            Owner:<br/>\n            <input id=\"ownerId\" name=\"ownerId\" type=\"text\" required=\"true\"\n            style={{width:'100px', textAlign: 'center'}}\n            value={globalState.loggedInUser} readonly>\n            </input> <br/>\n            <br/>\n            <input type=\"button\" value=\"Insert Course\" onClick={this.handleSubmit}/>\n        </fieldset>\n      </div>\n    )\n  }\n\n}\n\nexport default CourseInsert;\n"]},"metadata":{},"sourceType":"module"}